<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"wuyp315.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.13.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="一、MySQL基础1、数据库相关概念以前做系统，数据持久化的存储采用的是文件存储。存储到文件中可以达到系统关闭数据不会丢失的效果，当然文件存储也有它的弊端。 假设在文件中存储以下的数据： 1234姓名	年龄	性别	   住址张三	23	 男	   北京西三旗李四	24	 女	   北京西二旗王五	25	 男	   西安软件新城  现要将李四这条数据的性别数据改为男，我们现学习的IO技术可以通过将所">
<meta property="og:type" content="article">
<meta property="og:title" content="黑马-JavaWeb高效学习版">
<meta property="og:url" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/index.html">
<meta property="og:site_name" content="Mr.武先生">
<meta property="og:description" content="一、MySQL基础1、数据库相关概念以前做系统，数据持久化的存储采用的是文件存储。存储到文件中可以达到系统关闭数据不会丢失的效果，当然文件存储也有它的弊端。 假设在文件中存储以下的数据： 1234姓名	年龄	性别	   住址张三	23	 男	   北京西三旗李四	24	 女	   北京西二旗王五	25	 男	   西安软件新城  现要将李四这条数据的性别数据改为男，我们现学习的IO技术可以通过将所">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221101214500526.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221101214624398.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221101215035703.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221101215627181.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221101215749409.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/1556823-20181220220242472-524708778.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/1556823-20181220220359609-736422950.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20201109140222488.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/1556823-20181220220551145-1198958872.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20201109135248104.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20201109142704951.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20201109142737584.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20201109135848054.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20201109140423691.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210721205130231.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210721212754568.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210721214029913.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210721220032047.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210721220132919.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221101222928349.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210722190508272.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221102124843226.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221102130319470.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221102130406879.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221102130424017.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221102130443800.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221102130510422.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221102130522137.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221102130550049.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724120904180.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724130925801.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724131210759.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724134145803.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724134318685.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724140456921.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724134735939.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724135054834.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724140307910.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724135346913.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724135649341.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724141445785.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724173630506.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724174212443.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724174717647.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724174717647.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724175344508.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724175518159.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724180103531.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724174717647.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724180542757.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724180613494.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724224955876.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724225537533.png">
<meta property="og:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724230250263.png">
<meta property="article:published_time" content="2022-11-01T13:34:02.000Z">
<meta property="article:modified_time" content="2022-11-02T05:53:01.789Z">
<meta property="article:author" content="5OP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221101214500526.png">


<link rel="canonical" href="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/","path":"2022/11/01/黑马-JavaWeb高效学习版/","title":"黑马-JavaWeb高效学习版"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>黑马-JavaWeb高效学习版 | Mr.武先生</title>
  






  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Mr.武先生</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E3%80%81MySQL%E5%9F%BA%E7%A1%80"><span class="nav-number">1.</span> <span class="nav-text">一、MySQL基础</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="nav-number">1.1.</span> <span class="nav-text">1、数据库相关概念</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.1.1.</span> <span class="nav-text">1.1、数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="nav-number">1.1.2.</span> <span class="nav-text">1.2、数据库管理系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81%E5%B8%B8%E8%A7%81%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="nav-number">1.1.3.</span> <span class="nav-text">1.3、常见的数据库管理系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4%E3%80%81SQL"><span class="nav-number">1.1.4.</span> <span class="nav-text">1.4、SQL</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%E3%80%81MySQL"><span class="nav-number">1.2.</span> <span class="nav-text">2、MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81MySQL%E5%AE%89%E8%A3%85"><span class="nav-number">1.2.1.</span> <span class="nav-text">2.1、MySQL安装</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-1%E3%80%81%E4%B8%8B%E8%BD%BD"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">2.1.1、下载</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-2%E3%80%81%E5%AE%89%E8%A3%85-%E8%A7%A3%E5%8E%8B"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">2.1.2、安装(解压)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81MySQL%E5%8D%B8%E8%BD%BD"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.2、MySQL卸载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3%E3%80%81MySQL%E9%85%8D%E7%BD%AE"><span class="nav-number">1.2.3.</span> <span class="nav-text">2.3、MySQL配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-1%E3%80%81%E6%B7%BB%E5%8A%A0%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">2.3.1、添加环境变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-2%E3%80%81%E6%96%B0%E5%BB%BA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">2.3.2、新建配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-3%E3%80%81%E5%88%9D%E5%A7%8B%E5%8C%96MySQL"><span class="nav-number">1.2.3.3.</span> <span class="nav-text">2.3.3、初始化MySQL</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-4%E3%80%81%E6%B3%A8%E5%86%8CMySQL%E6%9C%8D%E5%8A%A1"><span class="nav-number">1.2.3.4.</span> <span class="nav-text">2.3.4、注册MySQL服务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-5%E3%80%81%E5%90%AF%E5%8A%A8MySQL%E6%9C%8D%E5%8A%A1"><span class="nav-number">1.2.3.5.</span> <span class="nav-text">2.3.5、启动MySQL服务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-6%E3%80%81%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E8%B4%A6%E6%88%B7%E5%AF%86%E7%A0%81"><span class="nav-number">1.2.3.6.</span> <span class="nav-text">2.3.6、修改默认账户密码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4%E3%80%81MySQL%E7%99%BB%E9%99%86%E5%92%8C%E9%80%80%E5%87%BA"><span class="nav-number">1.2.4.</span> <span class="nav-text">2.4、MySQL登陆和退出</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-1%E3%80%81%E7%99%BB%E9%99%86"><span class="nav-number">1.2.4.1.</span> <span class="nav-text">2.4.1、登陆</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-2%E3%80%81%E9%80%80%E5%87%BA"><span class="nav-number">1.2.4.2.</span> <span class="nav-text">2.4.2、退出</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5%E3%80%81MySQL%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="nav-number">1.2.5.</span> <span class="nav-text">2.5、MySQL数据模型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3%E3%80%81SQL%E6%A6%82%E8%BF%B0"><span class="nav-number">1.3.</span> <span class="nav-text">3、SQL概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E3%80%81SQL%E7%AE%80%E4%BB%8B"><span class="nav-number">1.3.1.</span> <span class="nav-text">3.1、SQL简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E3%80%81%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95"><span class="nav-number">1.3.2.</span> <span class="nav-text">3.2、通用语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3%E3%80%81SQL%E5%88%86%E7%B1%BB"><span class="nav-number">1.3.3.</span> <span class="nav-text">3.3、SQL分类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4%E3%80%81DDL-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.4.</span> <span class="nav-text">4、DDL:操作数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1%E3%80%81%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.4.1.</span> <span class="nav-text">4.1、查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2%E3%80%81%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.4.2.</span> <span class="nav-text">4.2、创建数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3%E3%80%81%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.4.3.</span> <span class="nav-text">4.3、删除数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4%E3%80%81%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.4.4.</span> <span class="nav-text">4.4、使用数据库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5%E3%80%81DDL-%E6%93%8D%E4%BD%9C%E8%A1%A8"><span class="nav-number">1.5.</span> <span class="nav-text">5、DDL:操作表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1%E3%80%81%E6%9F%A5%E8%AF%A2%E8%A1%A8"><span class="nav-number">1.5.1.</span> <span class="nav-text">5.1、查询表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2%E3%80%81%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="nav-number">1.5.2.</span> <span class="nav-text">5.2、创建表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3%E3%80%81%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.5.3.</span> <span class="nav-text">5.3、数据类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4%E3%80%81%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="nav-number">1.5.4.</span> <span class="nav-text">5.4、删除表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-5%E3%80%81%E4%BF%AE%E6%94%B9%E8%A1%A8"><span class="nav-number">1.5.5.</span> <span class="nav-text">5.5、修改表</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6%E3%80%81DML"><span class="nav-number">1.6.</span> <span class="nav-text">6、DML</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1%E3%80%81%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="nav-number">1.6.1.</span> <span class="nav-text">6.1、添加数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2%E3%80%81%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="nav-number">1.6.2.</span> <span class="nav-text">6.2、修改数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3%E3%80%81%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="nav-number">1.6.3.</span> <span class="nav-text">6.3、删除数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7%E3%80%81DQL"><span class="nav-number">1.7.</span> <span class="nav-text">7、DQL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1%E3%80%81%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.7.1.</span> <span class="nav-text">7.1、基础查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-1-1%E3%80%81%E8%AF%AD%E6%B3%95"><span class="nav-number">1.7.1.1.</span> <span class="nav-text">7.1.1、语法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2%E3%80%81%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.7.2.</span> <span class="nav-text">7.2、条件查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-1%E3%80%81%E8%AF%AD%E6%B3%95"><span class="nav-number">1.7.2.1.</span> <span class="nav-text">7.2.1、语法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3%E3%80%81%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.7.3.</span> <span class="nav-text">7.3、排序查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-3-1%E3%80%81%E8%AF%AD%E6%B3%95"><span class="nav-number">1.7.3.1.</span> <span class="nav-text">7.3.1、语法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4%E3%80%81%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="nav-number">1.7.4.</span> <span class="nav-text">7.4、聚合函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-4-1%E3%80%81%E6%A6%82%E5%BF%B5"><span class="nav-number">1.7.4.1.</span> <span class="nav-text">7.4.1、概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-4-2%E3%80%81%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E5%88%86%E7%B1%BB"><span class="nav-number">1.7.4.2.</span> <span class="nav-text">7.4.2、聚合函数分类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-4-3%E3%80%81%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E8%AF%AD%E6%B3%95"><span class="nav-number">1.7.4.3.</span> <span class="nav-text">7.4.3、聚合函数语法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-5%E3%80%81%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.7.5.</span> <span class="nav-text">7.5、分组查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-5-1%E3%80%81%E8%AF%AD%E6%B3%95"><span class="nav-number">1.7.5.1.</span> <span class="nav-text">7.5.1、语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-5-2%E3%80%81%E7%BB%83%E4%B9%A0"><span class="nav-number">1.7.5.2.</span> <span class="nav-text">7.5.2、练习</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-6%E3%80%81%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.7.6.</span> <span class="nav-text">7.6、分页查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-6-1%E3%80%81%E8%AF%AD%E6%B3%95"><span class="nav-number">1.7.6.1.</span> <span class="nav-text">7.6.1、语法</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8C%E3%80%81MySQL%E9%AB%98%E7%BA%A7"><span class="nav-number">2.</span> <span class="nav-text">二、MySQL高级</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1%E3%80%81%E7%BA%A6%E6%9D%9F"><span class="nav-number">2.1.</span> <span class="nav-text">1、约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1%E3%80%81%E6%A6%82%E5%BF%B5"><span class="nav-number">2.1.1.</span> <span class="nav-text">1.1、概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2%E3%80%81%E5%88%86%E7%B1%BB"><span class="nav-number">2.1.2.</span> <span class="nav-text">1.2、分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3%E3%80%81%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="nav-number">2.1.3.</span> <span class="nav-text">1.3、非空约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4%E3%80%81%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="nav-number">2.1.4.</span> <span class="nav-text">1.4、唯一约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5%E3%80%81%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-number">2.1.5.</span> <span class="nav-text">1.5、主键约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6%E3%80%81%E9%BB%98%E8%AE%A4%E7%BA%A6%E6%9D%9F"><span class="nav-number">2.1.6.</span> <span class="nav-text">1.6、默认约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-7%E3%80%81%E7%BA%A6%E6%9D%9F%E7%BB%83%E4%B9%A0"><span class="nav-number">2.1.7.</span> <span class="nav-text">1.7、约束练习</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-8%E3%80%81%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-number">2.1.8.</span> <span class="nav-text">1.8、外键约束</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-8-1%E3%80%81%E6%A6%82%E8%BF%B0"><span class="nav-number">2.1.8.1.</span> <span class="nav-text">1.8.1、概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-8-2%E3%80%81%E8%AF%AD%E6%B3%95"><span class="nav-number">2.1.8.2.</span> <span class="nav-text">1.8.2、语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-8-3%E3%80%81%E7%BB%83%E4%B9%A0"><span class="nav-number">2.1.8.3.</span> <span class="nav-text">1.8.3、练习</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="nav-number">2.2.</span> <span class="nav-text">2、数据库设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E7%AE%80%E4%BB%8B"><span class="nav-number">2.2.1.</span> <span class="nav-text">2.1、数据库设计简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E3%80%81%E8%A1%A8%E5%85%B3%E7%B3%BB-%E4%B8%80%E5%AF%B9%E5%A4%9A"><span class="nav-number">2.2.2.</span> <span class="nav-text">2.2、表关系(一对多)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3%E3%80%81%E8%A1%A8%E5%85%B3%E7%B3%BB-%E5%A4%9A%E5%AF%B9%E5%A4%9A"><span class="nav-number">2.2.3.</span> <span class="nav-text">2.3、表关系(多对多)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4%E3%80%81%E8%A1%A8%E5%85%B3%E7%B3%BB-%E4%B8%80%E5%AF%B9%E4%B8%80"><span class="nav-number">2.2.4.</span> <span class="nav-text">2.4、表关系(一对一)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3%E3%80%81%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">2.3.</span> <span class="nav-text">3、多表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1%E3%80%81%E5%86%85%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="nav-number">2.3.1.</span> <span class="nav-text">3.1、内连接查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2%E3%80%81%E5%A4%96%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="nav-number">2.3.2.</span> <span class="nav-text">3.2、外连接查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3%E3%80%81%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">2.3.3.</span> <span class="nav-text">3.3、子查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4%E3%80%81%E6%A1%88%E4%BE%8B"><span class="nav-number">2.3.4.</span> <span class="nav-text">3.4、案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4%E3%80%81%E4%BA%8B%E5%8A%A1"><span class="nav-number">2.4.</span> <span class="nav-text">4、事务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1%E3%80%81%E6%A6%82%E8%BF%B0"><span class="nav-number">2.4.1.</span> <span class="nav-text">4.1、概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2%E3%80%81%E8%AF%AD%E6%B3%95"><span class="nav-number">2.4.2.</span> <span class="nav-text">4.2、语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3%E3%80%81%E4%BB%A3%E7%A0%81%E9%AA%8C%E8%AF%81"><span class="nav-number">2.4.3.</span> <span class="nav-text">4.3、代码验证</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4%E3%80%81%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9B%9B%E5%A4%A7%E7%89%B9%E5%BE%81"><span class="nav-number">2.4.4.</span> <span class="nav-text">4.4、事务的四大特征</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">5OP</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wuyp315.github.io/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="5OP">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.武先生">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="黑马-JavaWeb高效学习版 | Mr.武先生">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          黑马-JavaWeb高效学习版
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-11-01 21:34:02" itemprop="dateCreated datePublished" datetime="2022-11-01T21:34:02+08:00">2022-11-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-11-02 13:53:01" itemprop="dateModified" datetime="2022-11-02T13:53:01+08:00">2022-11-02</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="一、MySQL基础"><a href="#一、MySQL基础" class="headerlink" title="一、MySQL基础"></a>一、MySQL基础</h1><h2 id="1、数据库相关概念"><a href="#1、数据库相关概念" class="headerlink" title="1、数据库相关概念"></a>1、数据库相关概念</h2><p>以前做系统，数据持久化的存储采用的是文件存储。存储到文件中可以达到系统关闭数据不会丢失的效果，当然文件存储也有它的弊端。</p>
<p>假设在文件中存储以下的数据：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">姓名	年龄	性别	   住址</span><br><span class="line">张三	23	 男	   北京西三旗</span><br><span class="line">李四	24	 女	   北京西二旗</span><br><span class="line">王五	25	 男	   西安软件新城</span><br></pre></td></tr></table></figure>

<p>现要将李四这条数据的性别数据改为男，我们现学习的IO技术可以通过将所有的数据读取到内存中，然后进行修改再存到该文件中。通过这种方式操作存在很大问题，现在只有三条数据，如果文件中存储1T的数据，那么就会发现内存根本就存储不了。</p>
<p>现需要既能持久化存储数据，也要能避免上述问题的技术使用在我们的系统中。数据库就是这样的一门技术。</p>
<h3 id="1-1、数据库"><a href="#1-1、数据库" class="headerlink" title="1.1、数据库"></a>1.1、数据库</h3><ul>
<li><p><strong>存储和管理数据的仓库，数据是有组织的进行存储。</strong></p>
</li>
<li><p>数据库英文名是 DataBase，简称DB。</p>
</li>
</ul>
<p>数据库就是将数据存储在硬盘上，可以达到持久化存储的效果。那又是如何解决上述问题的？使用数据库管理系统。</p>
<h3 id="1-2、数据库管理系统"><a href="#1-2、数据库管理系统" class="headerlink" title="1.2、数据库管理系统"></a>1.2、数据库管理系统</h3><ul>
<li><strong>管理数据库的大型软件</strong></li>
<li>英文：DataBase Management System，简称 DBMS</li>
</ul>
<p>在电脑上安装了数据库管理系统后，就可以通过数据库管理系统创建数据库来存储数据，也可以通过该系统对数据库中的数据进行数据的增删改查相关的操作。我们平时说的MySQL数据库其实是MySQL数据库管理系统。</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221101214500526.png" alt="image-20221101214500526"></p>
<p>通过上面的描述，大家应该已经知道了<strong>数据库管理系统</strong> 和 <strong>数据库</strong> 的关系。</p>
<h3 id="1-3、常见的数据库管理系统"><a href="#1-3、常见的数据库管理系统" class="headerlink" title="1.3、常见的数据库管理系统"></a>1.3、常见的数据库管理系统</h3><p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221101214624398.png" alt="image-20221101214624398"></p>
<p>接下来对上面列举的数据库管理系统进行简单的介绍：</p>
<ul>
<li>Oracle：收费的大型数据库，Oracle 公司的产品</li>
<li><strong>MySQL</strong>： 开源免费的中小型数据库。后来 Sun公司收购了 MySQL，而 Sun 公司又被 Oracle 收购</li>
<li>SQL Server：MicroSoft 公司收费的中型的数据库。C#、.net 等语言常使用</li>
<li>PostgreSQL：开源免费中小型的数据库</li>
<li>DB2：IBM 公司的大型收费数据库产品</li>
<li>SQLite：嵌入式的微型数据库。如：作为 Android 内置数据库</li>
<li>MariaDB：开源免费中小型的数据库</li>
</ul>
<p>我们课程上学习的是MySQL数据库管理系统，PostgreSQL在一些公司也有使用，此时大家肯定会想以后在公司中如果使用我们没有学习过程的PostgreSQL数据库管理系统怎么办？这点大家大可不必担心，如下图所示：</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221101215035703.png" alt="image-20221101215035703"></p>
<p>可以通过数据库管理系统操作数据库，对数据库中的数据进行增删改查操作，而怎么样让用户跟数据库管理系统打交道呢？就可以通过一门编程语言（SQL）来实现。</p>
<h3 id="1-4、SQL"><a href="#1-4、SQL" class="headerlink" title="1.4、SQL"></a>1.4、SQL</h3><ul>
<li>英文：Structured Query Language，简称 SQL，结构化查询语言</li>
<li>操作关系型数据库的编程语言</li>
<li>定义操作所有关系型数据库的统一标准，可以使用SQL操作所有的关系型数据库管理系统，以后工作中如果使用到了其他的数据库管理系统，也同样的使用SQL来操作。</li>
</ul>
<h2 id="2、MySQL"><a href="#2、MySQL" class="headerlink" title="2、MySQL"></a>2、MySQL</h2><h3 id="2-1、MySQL安装"><a href="#2-1、MySQL安装" class="headerlink" title="2.1、MySQL安装"></a>2.1、MySQL安装</h3><h4 id="2-1-1、下载"><a href="#2-1-1、下载" class="headerlink" title="2.1.1、下载"></a>2.1.1、下载</h4><p><a target="_blank" rel="noopener" href="https://downloads.mysql.com/archives/community/">https://downloads.mysql.com/archives/community/</a></p>
<p>点开上面的链接就能看到如下界面：</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221101215627181.png" alt="image-20221101215627181"></p>
<p>选择选择和自己<strong>系统位数</strong>相对应的版本点击右边的<strong>Download</strong>，此时会进到另一个页面，同样在接近页面底部的地方找到如下图所示的位置：</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221101215749409.png" alt="image-20221101215749409"></p>
<p>不用理会上面的登录和注册按钮，直接点击 <strong>No thanks, just start my download</strong>.就可以下载。</p>
<h4 id="2-1-2、安装-解压"><a href="#2-1-2、安装-解压" class="headerlink" title="2.1.2、安装(解压)"></a>2.1.2、安装(解压)</h4><p>下载完成后我们得到的是一个压缩包，将其解压，我们就可以得到MySQL 5.7.24的软件本体了(就是一个文件夹)，我们可以把它放在你想安装的位置。</p>
<h3 id="2-2、MySQL卸载"><a href="#2-2、MySQL卸载" class="headerlink" title="2.2、MySQL卸载"></a>2.2、MySQL卸载</h3><p>如果你想卸载MySQL，也很简单。</p>
<p>右键开始菜单，选择**命令提示符(管理员)**，打开黑框。</p>
<ol>
<li><p>敲入<code>net stop mysql</code>，回车。</p>
</li>
<li><p>再敲入<code>mysqld -remove mysql</code>，回车。</p>
</li>
<li><p>最后删除MySQL目录及相关的环境变量。</p>
</li>
</ol>
<h3 id="2-3、MySQL配置"><a href="#2-3、MySQL配置" class="headerlink" title="2.3、MySQL配置"></a>2.3、MySQL配置</h3><h4 id="2-3-1、添加环境变量"><a href="#2-3-1、添加环境变量" class="headerlink" title="2.3.1、添加环境变量"></a>2.3.1、添加环境变量</h4><blockquote>
<p>环境变量里面有很多选项，这里我们只用到<code>Path</code>这个参数。为什么在初始化的开始要添加环境变量呢？<br>在黑框(即CMD)中输入一个可执行程序的名字，Windows会先在环境变量中的<code>Path</code>所指的路径中寻找一遍，如果找到了就直接执行，没找到就在当前工作目录找，如果还没找到，就报错。我们添加环境变量的目的就是能够在任意一个黑框直接调用MySQL中的相关程序而不用总是修改工作目录，大大简化了操作。</p>
</blockquote>
<p>右键<strong>此电脑</strong>→<strong>属性</strong>，点击<strong>高级系统设置</strong></p>
<img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/1556823-20181220220242472-524708778.png" alt="img" style="zoom:90%;">

<p>点击<strong>环境变量</strong></p>
<img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/1556823-20181220220359609-736422950.png" alt="img" style="zoom:90%;">

<p>在<strong>系统变量</strong>中新建MYSQL_HOME</p>
<img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20201109140222488.png" alt="image-20201109140222488" style="zoom:80%;">

<p>在<strong>系统变量</strong>中找到并<strong>双击Path</strong></p>
<img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/1556823-20181220220551145-1198958872.png" alt="img" style="zoom:80%;">

<p>点击<strong>新建</strong></p>
<img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20201109135248104.png" alt="image-20201109135248104" style="zoom:80%;">

<p>最后点击确定。</p>
<p><strong>如何验证是否添加成功？</strong></p>
<p>右键开始菜单(就是屏幕左下角)，选择<strong>命令提示符(管理员)<strong>，打开黑框，敲入</strong>mysql</strong>，回车。<br>如果提示<code>Can&#39;t connect to MySQL server on &#39;localhost&#39;</code>则证明添加成功；<br>如果提示<code>mysql不是内部或外部命令，也不是可运行的程序或批处理文件</code>则表示添加添加失败，请重新检查步骤并重试。</p>
<h4 id="2-3-2、新建配置文件"><a href="#2-3-2、新建配置文件" class="headerlink" title="2.3.2、新建配置文件"></a>2.3.2、新建配置文件</h4><p>新建一个文本文件，内容如下：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[mysql]</span></span><br><span class="line"><span class="attr">default-character-set</span>=<span class="string">utf8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[mysqld]</span></span><br><span class="line"><span class="attr">character-set-server</span>=<span class="string">utf8</span></span><br><span class="line"><span class="attr">default-storage-engine</span>=<span class="string">INNODB</span></span><br><span class="line"><span class="attr">sql_mode</span>=<span class="string">STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span></span><br></pre></td></tr></table></figure>

<p>把上面的文本文件另存为，在保存类型里选<strong>所有文件 (<em>.</em>)<strong>，文件名叫</strong>my.ini</strong>，存放的路径为MySQL的<strong>根目录</strong>。</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20201109142704951.png" alt="image-20201109142704951"></p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20201109142737584.png" alt="image-20201109142737584"></p>
<p>上面代码意思就是配置数据库的默认编码集为utf-8和默认存储引擎为INNODB。</p>
<h4 id="2-3-3、初始化MySQL"><a href="#2-3-3、初始化MySQL" class="headerlink" title="2.3.3、初始化MySQL"></a>2.3.3、初始化MySQL</h4><p>在刚才的黑框中敲入<code>mysqld --initialize-insecure</code>，回车，稍微等待一会，如果出现没有出现报错信息(如下图)则证明data目录初始化没有问题，此时再查看MySQL目录下已经有data目录生成。</p>
<p>tips：如果出现如下错误</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20201109135848054.png" alt="image-20201109135848054"></p>
<p>是由于权限不足导致的，去<strong>C:\Windows\System32</strong> 下以管理员方式运行 cmd.exe</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20201109140423691.png" alt="image-20201109140423691"></p>
<h4 id="2-3-4、注册MySQL服务"><a href="#2-3-4、注册MySQL服务" class="headerlink" title="2.3.4、注册MySQL服务"></a>2.3.4、注册MySQL服务</h4><p>在黑框里敲入<code>mysqld -install</code>，回车。</p>
<h4 id="2-3-5、启动MySQL服务"><a href="#2-3-5、启动MySQL服务" class="headerlink" title="2.3.5、启动MySQL服务"></a>2.3.5、启动MySQL服务</h4><p>在黑框里敲入<code>net start mysql</code>，回车。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">net start mysql  // 启动mysql服务</span><br><span class="line">    </span><br><span class="line">net stop mysql  // 停止mysql服务</span><br></pre></td></tr></table></figure>

<h4 id="2-3-6、修改默认账户密码"><a href="#2-3-6、修改默认账户密码" class="headerlink" title="2.3.6、修改默认账户密码"></a>2.3.6、修改默认账户密码</h4><p>在黑框里敲入<code>mysqladmin -u root password 1234</code>，这里的<code>1234</code>就是指默认管理员(即root账户)的密码，可以自行修改成你喜欢的。</p>
<h3 id="2-4、MySQL登陆和退出"><a href="#2-4、MySQL登陆和退出" class="headerlink" title="2.4、MySQL登陆和退出"></a>2.4、MySQL登陆和退出</h3><h4 id="2-4-1、登陆"><a href="#2-4-1、登陆" class="headerlink" title="2.4.1、登陆"></a>2.4.1、登陆</h4><p>右键开始菜单，选择<strong>命令提示符</strong>，打开黑框。<br>在黑框中输入，<code>mysql -uroot -p1234</code>，回车，出现下图且左下角为<code>mysql&gt;</code>，则登录成功。</p>
<p>登陆参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u用户名 -p密码 -h要连接的mysql服务器的ip地址(默认127.0.0.1) -P端口号(默认3306)</span><br></pre></td></tr></table></figure>

<h4 id="2-4-2、退出"><a href="#2-4-2、退出" class="headerlink" title="2.4.2、退出"></a>2.4.2、退出</h4><p>退出mysql：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br><span class="line">quit</span><br></pre></td></tr></table></figure>

<h3 id="2-5、MySQL数据模型"><a href="#2-5、MySQL数据模型" class="headerlink" title="2.5、MySQL数据模型"></a>2.5、MySQL数据模型</h3><p><strong>关系型数据库：</strong></p>
<blockquote>
<p>关系型数据库是建立在关系模型基础上的数据库，简单说，关系型数据库是由多张能互相连接的 二维表 组成的数据库</p>
</blockquote>
<p>如下图，<strong>订单信息表</strong>和 <strong>客户信息表</strong>都是有行有列二维表，我们将这样的称为关系型数据库。</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210721205130231.png" alt="image-20210721205130231"></p>
<p>接下来看关系型数据库的优点：</p>
<ul>
<li>都是使用表结构，格式一致，易于维护。</li>
<li>使用通用的 SQL 语言操作，使用方便，可用于复杂查询。<ul>
<li>关系型数据库都可以通过SQL进行操作，所以使用方便。</li>
<li>复杂查询。现在需要查询001号订单数据，可以看到该订单是1号客户的订单，而1号订单是李聪这个客户。以后也可以在一张表中进行统计分析等操作。</li>
</ul>
</li>
<li>数据存储在磁盘中，安全。</li>
</ul>
<p><strong>数据模型：</strong></p>
<img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210721212754568.png" alt="image-20210721212754568" style="zoom:70%;">

<p>如上图，我们通过客户端可以通过数据库管理系统创建数据库，在数据库中创建表，在表中添加数据。创建的<strong>每一个数据库对应到磁盘上都是一个文件夹</strong>。</p>
<p>而一个数据库下可以创建多张表，我们到MySQL中自带的mysql数据库的文件夹目录下：</p>
<img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210721214029913.png" alt="image-20210721214029913" style="zoom:80%;">

<p>而上图中右边的 <code>db.frm</code> 是表文件，<code>db.MYD</code> 是数据文件，通过这两个文件就可以查询到数据展示成二维表的效果。</p>
<p><strong>小结：</strong></p>
<ul>
<li>MySQL中可以创建多个数据库，每个数据库对应到磁盘上的一个文件夹</li>
<li>在每个数据库中可以创建多个表，每张都对应到磁盘上一个 frm 文件</li>
<li>每张表可以存储多条数据，数据会被存储到磁盘中  MYD 文件中</li>
</ul>
<h2 id="3、SQL概述"><a href="#3、SQL概述" class="headerlink" title="3、SQL概述"></a>3、SQL概述</h2><p>了解了数据模型后，接下来我们就学习SQL语句，通过SQL语句对数据库、表、数据进行增删改查操作。 </p>
<h3 id="3-1、SQL简介"><a href="#3-1、SQL简介" class="headerlink" title="3.1、SQL简介"></a>3.1、SQL简介</h3><ul>
<li>英文：Structured Query Language，简称 SQL</li>
<li>结构化查询语言，一门操作关系型数据库的编程语言</li>
<li>定义操作所有关系型数据库的统一标准</li>
<li>对于同一个需求，每一种数据库操作的方式可能会存在一些不一样的地方，我们称为“方言”</li>
</ul>
<h3 id="3-2、通用语法"><a href="#3-2、通用语法" class="headerlink" title="3.2、通用语法"></a>3.2、通用语法</h3><ul>
<li>SQL 语句可以单行或多行书写，以分号结尾。</li>
</ul>
<ul>
<li><p>MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。</p>
</li>
<li><p>注释</p>
<ul>
<li><p>单行注释: – 注释内容 或 #注释内容(MySQL 特有) </p>
<blockquote>
<p>注意：使用– 添加单行注释时，–后面一定要加空格，而#没有要求。</p>
</blockquote>
</li>
</ul>
<ul>
<li>多行注释: &#x2F;* 注释 *&#x2F;</li>
</ul>
</li>
</ul>
<h3 id="3-3、SQL分类"><a href="#3-3、SQL分类" class="headerlink" title="3.3、SQL分类"></a>3.3、SQL分类</h3><ul>
<li><p>DDL(Data Definition Language) ： 数据定义语言，用来定义数据库对象：数据库，表，列等</p>
<img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210721220032047.png" alt="image-20210721220032047" style="zoom:60%;">
</li>
<li><p>DML(Data Manipulation Language) 数据操作语言，用来对数据库中表的数据进行增删改</p>
<img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210721220132919.png" alt="image-20210721220132919" style="zoom:60%;">
</li>
<li><p>DQL(Data Query Language) 数据查询语言，用来查询数据库中表的记录(数据)</p>
</li>
<li><p>DCL(Data Control Language) 数据控制语言，用来定义数据库的访问权限和安全级别，及创建用户</p>
</li>
</ul>
<blockquote>
<p>注意： 以后我们最常操作的是 <code>DML</code> 和 <code>DQL</code>  ，因为我们开发中最常操作的就是数据。</p>
</blockquote>
<h2 id="4、DDL-操作数据库"><a href="#4、DDL-操作数据库" class="headerlink" title="4、DDL:操作数据库"></a>4、DDL:操作数据库</h2><p>我们先来学习DDL来操作数据库。而操作数据库主要就是对数据库的增删查操作。</p>
<h3 id="4-1、查询"><a href="#4-1、查询" class="headerlink" title="4.1、查询"></a>4.1、查询</h3><p>查询所有的数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> DATABASES;</span><br></pre></td></tr></table></figure>

<h3 id="4-2、创建数据库"><a href="#4-2、创建数据库" class="headerlink" title="4.2、创建数据库"></a>4.2、创建数据库</h3><ul>
<li><strong>创建数据库</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE 数据库名称;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>创建数据库(判断，如果不存在则创建)</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> 数据库名称;</span><br></pre></td></tr></table></figure>

<h3 id="4-3、删除数据库"><a href="#4-3、删除数据库" class="headerlink" title="4.3、删除数据库"></a>4.3、删除数据库</h3><ul>
<li><strong>删除数据库</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE 数据库名称;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>删除数据库(判断，如果存在则删除)</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE IF <span class="keyword">EXISTS</span> 数据库名称;</span><br></pre></td></tr></table></figure>

<h3 id="4-4、使用数据库"><a href="#4-4、使用数据库" class="headerlink" title="4.4、使用数据库"></a>4.4、使用数据库</h3><p>数据库创建好了，要在数据库中创建表，得先明确在哪儿个数据库中操作，此时就需要使用数据库。</p>
<ul>
<li><strong>使用数据库</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE 数据库名称;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>查看当前使用的数据库</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATABASE();</span><br></pre></td></tr></table></figure>

<h2 id="5、DDL-操作表"><a href="#5、DDL-操作表" class="headerlink" title="5、DDL:操作表"></a>5、DDL:操作表</h2><p>操作表也就是对表进行增（Create）删（Retrieve）改（Update）查（Delete）。</p>
<h3 id="5-1、查询表"><a href="#5-1、查询表" class="headerlink" title="5.1、查询表"></a>5.1、查询表</h3><ul>
<li><strong>查询当前数据库下所有表名称</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>查询表结构</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DESC</span> 表名称;</span><br></pre></td></tr></table></figure>

<h3 id="5-2、创建表"><a href="#5-2、创建表" class="headerlink" title="5.2、创建表"></a>5.2、创建表</h3><ul>
<li><strong>创建表</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名 (</span><br><span class="line">	字段名<span class="number">1</span>  数据类型<span class="number">1</span>,</span><br><span class="line">	字段名<span class="number">2</span>  数据类型<span class="number">2</span>,</span><br><span class="line">	…</span><br><span class="line">	字段名n  数据类型n</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：最后一行末尾，不能加逗号</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_user (</span><br><span class="line">	id <span class="type">int</span>,</span><br><span class="line">    username <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    password <span class="type">varchar</span>(<span class="number">32</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="5-3、数据类型"><a href="#5-3、数据类型" class="headerlink" title="5.3、数据类型"></a>5.3、数据类型</h3><p>MySQL 支持多种类型，可以分为三类：</p>
<ul>
<li><p>数值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tinyint : 小整数型，占一个字节</span><br><span class="line"><span class="type">int</span>	： 大整数类型，占四个字节</span><br><span class="line"><span class="keyword">double</span> ： 浮点类型</span><br><span class="line">	使用格式： 字段名 <span class="keyword">double</span>(总长度,小数点后保留的位数)</span><br><span class="line">	eg ： score <span class="keyword">double</span>(<span class="number">5</span>,<span class="number">2</span>)   </span><br></pre></td></tr></table></figure>
</li>
<li><p>日期</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">date</span> ： 日期值。只包含年月日</span><br><span class="line">datetime ： 混合日期和时间值。包含年月日时分秒</span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> ： 定长字符串。</span><br><span class="line">	优点：存储性能高</span><br><span class="line">	缺点：浪费空间</span><br><span class="line">	eg ： name <span class="type">char</span>(<span class="number">10</span>)  如果存储的数据字符个数不足<span class="number">10</span>个，也会占<span class="number">10</span>个的空间</span><br><span class="line"><span class="type">varchar</span> ： 变长字符串。</span><br><span class="line">	优点：节约空间</span><br><span class="line">	缺点：存储性能底</span><br><span class="line">	eg ： name <span class="type">varchar</span>(<span class="number">10</span>) 如果存储的数据字符个数不足<span class="number">10</span>个，那就数据字符个数是几就占几个的空间	</span><br></pre></td></tr></table></figure></li>
</ul>
<p>MySQL 具体数据类型</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221101222928349.png" alt="image-20221101222928349"></p>
<p><strong>案例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">需求：设计一张学生表，请注重数据类型、长度的合理性</span><br><span class="line">	1. 编号</span><br><span class="line">	2. 姓名，姓名最长不超过10个汉字</span><br><span class="line">	3. 性别，因为取值只有两种可能，因此最多一个汉字</span><br><span class="line">	4. 生日，取值为年月日</span><br><span class="line">	5. 入学成绩，小数点后保留两位</span><br><span class="line">	6. 邮件地址，最大长度不超过 64</span><br><span class="line">	7. 家庭联系电话，不一定是手机号码，可能会出现 - 等字符</span><br><span class="line">	8. 学生状态（用数字表示，正常、休学、毕业...）</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student (</span><br><span class="line">	id <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">    gender <span class="type">char</span>(<span class="number">1</span>),</span><br><span class="line">    birthday <span class="type">date</span>,</span><br><span class="line">    score <span class="keyword">double</span>(<span class="number">5</span>,<span class="number">2</span>),</span><br><span class="line">    email <span class="type">varchar</span>(<span class="number">15</span>),</span><br><span class="line">    tel <span class="type">varchar</span>(<span class="number">15</span>),</span><br><span class="line">    status tinyint</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="5-4、删除表"><a href="#5-4、删除表" class="headerlink" title="5.4、删除表"></a>5.4、删除表</h3><ul>
<li><strong>删除表</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> 表名;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>删除表时判断表是否存在</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> 表名;</span><br></pre></td></tr></table></figure>

<h3 id="5-5、修改表"><a href="#5-5、修改表" class="headerlink" title="5.5、修改表"></a>5.5、修改表</h3><ul>
<li><strong>修改表名</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 RENAME <span class="keyword">TO</span> 新的表名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将表名student修改为stu</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student rename <span class="keyword">to</span> stu;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>添加一列</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> 列名 数据类型;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 给stu表添加一列address，该字段类型是varchar(50)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu <span class="keyword">add</span> address <span class="type">varchar</span>(<span class="number">50</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>修改数据类型</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 MODIFY 列名 新数据类型;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将stu表中的address字段的类型改为 char(50)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu modify address <span class="type">char</span>(<span class="number">50</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>修改列名和数据类型</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 CHANGE 列名 新列名 新数据类型;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将stu表中的address字段名改为 addr，类型改为varchar(50)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu change address addr <span class="type">varchar</span>(<span class="number">50</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>删除列</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> 列名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将stu表中的addr字段 删除</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu <span class="keyword">drop</span> addr;</span><br></pre></td></tr></table></figure>

<h2 id="6、DML"><a href="#6、DML" class="headerlink" title="6、DML"></a>6、DML</h2><p>DML主要是对数据进行增（insert）删（delete）改（update）操作。</p>
<h3 id="6-1、添加数据"><a href="#6-1、添加数据" class="headerlink" title="6.1、添加数据"></a>6.1、添加数据</h3><ul>
<li><strong>给指定列添加数据</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名(列名<span class="number">1</span>,列名<span class="number">2</span>,…) <span class="keyword">VALUES</span>(值<span class="number">1</span>,值<span class="number">2</span>,…);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>给全部列添加数据</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名 <span class="keyword">VALUES</span>(值<span class="number">1</span>,值<span class="number">2</span>,…);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>批量添加数据</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名(列名<span class="number">1</span>,列名<span class="number">2</span>,…) <span class="keyword">VALUES</span>(值<span class="number">1</span>,值<span class="number">2</span>,…),(值<span class="number">1</span>,值<span class="number">2</span>,…),(值<span class="number">1</span>,值<span class="number">2</span>,…)…;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名 <span class="keyword">VALUES</span>(值<span class="number">1</span>,值<span class="number">2</span>,…),(值<span class="number">1</span>,值<span class="number">2</span>,…),(值<span class="number">1</span>,值<span class="number">2</span>,…)…;</span><br></pre></td></tr></table></figure>

<h3 id="6-2、修改数据"><a href="#6-2、修改数据" class="headerlink" title="6.2、修改数据"></a>6.2、修改数据</h3><ul>
<li><strong>修改表数据</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> 表名 <span class="keyword">SET</span> 列名<span class="number">1</span><span class="operator">=</span>值<span class="number">1</span>,列名<span class="number">2</span><span class="operator">=</span>值<span class="number">2</span>,… [<span class="keyword">WHERE</span> 条件] ;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：</p>
<ol>
<li>修改语句中如果不加条件，则将所有数据都修改！</li>
<li>像上面的语句中的中括号，表示在写sql语句中可以省略这部分</li>
</ol>
</blockquote>
<h3 id="6-3、删除数据"><a href="#6-3、删除数据" class="headerlink" title="6.3、删除数据"></a>6.3、删除数据</h3><ul>
<li><strong>删除数据</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名 [<span class="keyword">WHERE</span> 条件] ;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>练习</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除张三记录</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> stu <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除stu表中所有的数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> stu;</span><br></pre></td></tr></table></figure>

<h2 id="7、DQL"><a href="#7、DQL" class="headerlink" title="7、DQL"></a>7、DQL</h2><p>查询的完整语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    字段列表</span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">    表名列表 </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">    条件列表</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">    分组字段</span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">    分组后条件</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">    排序字段</span><br><span class="line">LIMIT</span><br><span class="line">    分页限定</span><br></pre></td></tr></table></figure>

<h3 id="7-1、基础查询"><a href="#7-1、基础查询" class="headerlink" title="7.1、基础查询"></a>7.1、基础查询</h3><h4 id="7-1-1、语法"><a href="#7-1-1、语法" class="headerlink" title="7.1.1、语法"></a>7.1.1、语法</h4><ul>
<li><strong>查询多个字段</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> 表名; <span class="comment">-- 查询所有数据</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>去除重复记录</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> 字段列表 <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>起别名</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">AS</span>: <span class="keyword">AS</span> 也可以省略</span><br></pre></td></tr></table></figure>

<h3 id="7-2、条件查询"><a href="#7-2、条件查询" class="headerlink" title="7.2、条件查询"></a>7.2、条件查询</h3><h4 id="7-2-1、语法"><a href="#7-2-1、语法" class="headerlink" title="7.2.1、语法"></a>7.2.1、语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名 <span class="keyword">WHERE</span> 条件列表;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>条件</strong></li>
</ul>
<p>条件列表可以使用以下运算符</p>
<img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210722190508272.png" alt="image-20210722190508272" style="zoom:60%;">

<blockquote>
<p>模糊查询使用like关键字，可以使用通配符进行占位:</p>
<p>（1）_ : 代表单个任意字符</p>
<p>（2）% : 代表任意个数字符</p>
</blockquote>
<h3 id="7-3、排序查询"><a href="#7-3、排序查询" class="headerlink" title="7.3、排序查询"></a>7.3、排序查询</h3><h4 id="7-3-1、语法"><a href="#7-3-1、语法" class="headerlink" title="7.3.1、语法"></a>7.3.1、语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名 <span class="keyword">ORDER</span> <span class="keyword">BY</span> 排序字段名<span class="number">1</span> [排序方式<span class="number">1</span>],排序字段名<span class="number">2</span> [排序方式<span class="number">2</span>] …;</span><br></pre></td></tr></table></figure>

<p>上述语句中的排序方式有两种，分别是：</p>
<ul>
<li>ASC ： 升序排列 <strong>（默认值）</strong></li>
<li>DESC ： 降序排列</li>
</ul>
<blockquote>
<p>注意：如果有多个排序条件，当前边的条件值一样时，才会根据第二条件进行排序</p>
</blockquote>
<h3 id="7-4、聚合函数"><a href="#7-4、聚合函数" class="headerlink" title="7.4、聚合函数"></a>7.4、聚合函数</h3><h4 id="7-4-1、概念"><a href="#7-4-1、概念" class="headerlink" title="7.4.1、概念"></a>7.4.1、概念</h4><p> <strong>将一列数据作为一个整体，进行纵向计算。</strong></p>
<h4 id="7-4-2、聚合函数分类"><a href="#7-4-2、聚合函数分类" class="headerlink" title="7.4.2、聚合函数分类"></a>7.4.2、聚合函数分类</h4><table>
<thead>
<tr>
<th>函数名</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>count(列名)</td>
<td>统计数量（一般选用不为null的列）</td>
</tr>
<tr>
<td>max(列名)</td>
<td>最大值</td>
</tr>
<tr>
<td>min(列名)</td>
<td>最小值</td>
</tr>
<tr>
<td>sum(列名)</td>
<td>求和</td>
</tr>
<tr>
<td>avg(列名)</td>
<td>平均值</td>
</tr>
</tbody></table>
<h4 id="7-4-3、聚合函数语法"><a href="#7-4-3、聚合函数语法" class="headerlink" title="7.4.3、聚合函数语法"></a>7.4.3、聚合函数语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 聚合函数名(列名) <span class="keyword">FROM</span> 表;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：null 值不参与所有聚合函数运算</p>
</blockquote>
<h3 id="7-5、分组查询"><a href="#7-5、分组查询" class="headerlink" title="7.5、分组查询"></a>7.5、分组查询</h3><h4 id="7-5-1、语法"><a href="#7-5-1、语法" class="headerlink" title="7.5.1、语法"></a>7.5.1、语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名 [<span class="keyword">WHERE</span> 分组前条件限定] <span class="keyword">GROUP</span> <span class="keyword">BY</span> 分组字段名 [<span class="keyword">HAVING</span> 分组后条件过滤];</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义</p>
</blockquote>
<h4 id="7-5-2、练习"><a href="#7-5-2、练习" class="headerlink" title="7.5.2、练习"></a>7.5.2、练习</h4><ul>
<li><p>查询男同学和女同学各自的数学平均分</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sex, <span class="built_in">avg</span>(math) <span class="keyword">from</span> stu <span class="keyword">group</span> <span class="keyword">by</span> sex;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> name, sex, <span class="built_in">avg</span>(math) <span class="keyword">from</span> stu <span class="keyword">group</span> <span class="keyword">by</span> sex;  <span class="comment">-- 这里查询name字段就没有任何意义</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>查询男同学和女同学各自的数学平均分，以及各自人数</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sex, <span class="built_in">avg</span>(math),<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> stu <span class="keyword">group</span> <span class="keyword">by</span> sex;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sex, <span class="built_in">avg</span>(math),<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> stu <span class="keyword">where</span> math <span class="operator">&gt;</span> <span class="number">70</span> <span class="keyword">group</span> <span class="keyword">by</span> sex;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组，分组之后人数大于2个的</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sex, <span class="built_in">avg</span>(math),<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> stu <span class="keyword">where</span> math <span class="operator">&gt;</span> <span class="number">70</span> <span class="keyword">group</span> <span class="keyword">by</span> sex <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)  <span class="operator">&gt;</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>where 和 having 区别：</strong></p>
<ul>
<li><p>执行时机不一样：where 是分组之前进行限定，不满足where条件，则不参与分组，而having是分组之后对结果进行过滤。</p>
</li>
<li><p>可判断的条件不一样：where 不能对聚合函数进行判断，having 可以。</p>
</li>
</ul>
<h3 id="7-6、分页查询"><a href="#7-6、分页查询" class="headerlink" title="7.6、分页查询"></a>7.6、分页查询</h3><h4 id="7-6-1、语法"><a href="#7-6-1、语法" class="headerlink" title="7.6.1、语法"></a>7.6.1、语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名 LIMIT  起始索引 , 查询条目数;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意： 上述语句中的起始索引是从0开始</p>
</blockquote>
<p>起始索引计算公式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">起始索引 <span class="operator">=</span> (当前页码 <span class="operator">-</span> <span class="number">1</span>) <span class="operator">*</span> 每页显示的条数</span><br></pre></td></tr></table></figure>

<h1 id="二、MySQL高级"><a href="#二、MySQL高级" class="headerlink" title="二、MySQL高级"></a>二、MySQL高级</h1><h2 id="1、约束"><a href="#1、约束" class="headerlink" title="1、约束"></a>1、约束</h2><p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221102124843226.png" alt="image-20221102124843226"></p>
<p>上面表中可以看到表中数据存在一些问题：</p>
<ul>
<li>id 列一般是用标示数据的唯一性的，而上述表中的id为1的有三条数据，并且 <code>马花疼</code> 没有id进行标示</li>
<li><code>柳白</code> 这条数据的age列的数据是3000，而人也不可能活到3000岁</li>
<li><code>马运</code>  这条数据的math数学成绩是-5，而数学学得再不好也不可能出现负分</li>
<li><code>柳青</code> 这条数据的english列（英文成绩）值为null，而成绩即使没考也得是0分</li>
</ul>
<p>针对上述数据问题，我们就可以从数据库层面在添加数据的时候进行限制，这个就是约束。</p>
<h3 id="1-1、概念"><a href="#1-1、概念" class="headerlink" title="1.1、概念"></a>1.1、概念</h3><ul>
<li><p>约束是作用于表中列上的规则，用于限制加入表的数据</p>
<p>例如：我们可以给id列加约束，让其值不能重复，不能为null值。</p>
</li>
<li><p>约束的存在保证了数据库中数据的正确性、有效性和完整性</p>
<p>添加约束可以在添加数据的时候就限制不正确的数据，年龄是3000，数学成绩是-5分这样无效的数据，继而保障数据的完整性。</p>
</li>
</ul>
<h3 id="1-2、分类"><a href="#1-2、分类" class="headerlink" title="1.2、分类"></a>1.2、分类</h3><ul>
<li><p><strong>非空约束： 关键字是 NOT NULL</strong></p>
<p>保证列中所有的数据不能有null值。</p>
<p>例如：id列在添加 <code>马花疼</code> 这条数据时就不能添加成功。</p>
</li>
<li><p><strong>唯一约束：关键字是  UNIQUE</strong></p>
<p>保证列中所有数据各不相同。</p>
<p>例如：id列中三条数据的值都是1，这样的数据在添加时是绝对不允许的。</p>
</li>
<li><p><strong>主键约束： 关键字是  PRIMARY KEY</strong></p>
<p>主键是一行数据的唯一标识，要求非空且唯一。一般我们都会给每张表添加一个主键列用来唯一标识数据。</p>
<p>例如：上图表中id就可以作为主键，来标识每条数据。那么这样就要求数据中id的值不能重复，不能为null值。</p>
</li>
<li><p><strong>检查约束： 关键字是  CHECK</strong> </p>
<p>保证列中的值满足某一条件。</p>
<p>例如：我们可以给age列添加一个范围，最低年龄可以设置为1，最大年龄就可以设置为300，这样的数据才更合理些。</p>
<blockquote>
<p>注意：MySQL不支持检查约束。</p>
<p>这样是不是就没办法保证年龄在指定的范围内了？从数据库层面不能保证，以后可以在java代码中进行限制，一样也可以实现要求。</p>
</blockquote>
</li>
<li><p><strong>默认约束： 关键字是   DEFAULT</strong></p>
<p>保存数据时，未指定值则采用默认值。</p>
<p>例如：我们在给english列添加该约束，指定默认值是0，这样在添加数据时没有指定具体值时就会采用默认给定的0。</p>
</li>
<li><p><strong>外键约束： 关键字是  FOREIGN KEY</strong></p>
<p>外键用来让两个表的数据之间建立链接，保证数据的一致性和完整性。</p>
</li>
</ul>
<h3 id="1-3、非空约束"><a href="#1-3、非空约束" class="headerlink" title="1.3、非空约束"></a>1.3、非空约束</h3><ul>
<li><p>概念</p>
<p>非空约束用于保证列中所有数据不能有NULL值</p>
</li>
<li><p>语法</p>
<ul>
<li><p>添加约束</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表时添加非空约束</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名(</span><br><span class="line">   列名 数据类型 <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   …</span><br><span class="line">); </span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 建完表后添加非空约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 MODIFY 字段名 数据类型 <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除约束</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 MODIFY 字段名 数据类型;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="1-4、唯一约束"><a href="#1-4、唯一约束" class="headerlink" title="1.4、唯一约束"></a>1.4、唯一约束</h3><ul>
<li><p>概念</p>
<p>唯一约束用于保证列中所有数据各不相同</p>
</li>
<li><p>语法</p>
<ul>
<li><p>添加约束</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表时添加唯一约束</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名(</span><br><span class="line">   列名 数据类型 <span class="keyword">UNIQUE</span> [AUTO_INCREMENT],</span><br><span class="line">   <span class="comment">-- AUTO_INCREMENT: 当不指定值时自动增长</span></span><br><span class="line">   …</span><br><span class="line">); </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名(</span><br><span class="line">   列名 数据类型,</span><br><span class="line">   …</span><br><span class="line">   [<span class="keyword">CONSTRAINT</span>] [约束名称] <span class="keyword">UNIQUE</span>(列名)</span><br><span class="line">); </span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 建完表后添加唯一约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 MODIFY 字段名 数据类型 <span class="keyword">UNIQUE</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除约束</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> INDEX 字段名;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="1-5、主键约束"><a href="#1-5、主键约束" class="headerlink" title="1.5、主键约束"></a>1.5、主键约束</h3><ul>
<li><p>概念</p>
<p>主键是一行数据的唯一标识，要求非空且唯一</p>
<p>一张表只能有一个主键</p>
</li>
<li><p>语法</p>
<ul>
<li><p>添加约束</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表时添加主键约束</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名(</span><br><span class="line">   列名 数据类型 <span class="keyword">PRIMARY</span> KEY [AUTO_INCREMENT],</span><br><span class="line">   …</span><br><span class="line">); </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名(</span><br><span class="line">   列名 数据类型,</span><br><span class="line">   [<span class="keyword">CONSTRAINT</span>] [约束名称] <span class="keyword">PRIMARY</span> KEY(列名)</span><br><span class="line">); </span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 建完表后添加主键约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(字段名);</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除约束</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="1-6、默认约束"><a href="#1-6、默认约束" class="headerlink" title="1.6、默认约束"></a>1.6、默认约束</h3><ul>
<li><p>概念</p>
<p>保存数据时，未指定值则采用默认值</p>
</li>
<li><p>语法</p>
<ul>
<li><p>添加约束</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表时添加默认约束</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名(</span><br><span class="line">   列名 数据类型 <span class="keyword">DEFAULT</span> 默认值,</span><br><span class="line">   …</span><br><span class="line">); </span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 建完表后添加默认约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ALTER</span> 列名 <span class="keyword">SET</span> <span class="keyword">DEFAULT</span> 默认值;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除约束</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ALTER</span> 列名 <span class="keyword">DROP</span> <span class="keyword">DEFAULT</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="1-7、约束练习"><a href="#1-7、约束练习" class="headerlink" title="1.7、约束练习"></a>1.7、约束练习</h3><p><strong>根据需求，为表添加合适的约束</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 员工表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp (</span><br><span class="line">    id <span class="type">INT</span>,  <span class="comment">-- 员工id，主键且自增长</span></span><br><span class="line">    ename <span class="type">VARCHAR</span>(<span class="number">50</span>), <span class="comment">-- 员工姓名，非空且唯一</span></span><br><span class="line">    joindate <span class="type">DATE</span>,  <span class="comment">-- 入职日期，非空</span></span><br><span class="line">    salary <span class="keyword">DOUBLE</span>(<span class="number">7</span>,<span class="number">2</span>),  <span class="comment">-- 工资，非空</span></span><br><span class="line">    bonus <span class="keyword">DOUBLE</span>(<span class="number">7</span>,<span class="number">2</span>)  <span class="comment">-- 奖金，如果没有将近默认为0</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>上面一定给出了具体的要求，我们可以根据要求创建这张表，并为每一列添加对应的约束。建表语句如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 员工表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp (</span><br><span class="line">  id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY, <span class="comment">-- 员工id，主键且自增长</span></span><br><span class="line">  ename <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">UNIQUE</span>, <span class="comment">-- 员工姓名，非空并且唯一</span></span><br><span class="line">  joindate <span class="type">DATE</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> , <span class="comment">-- 入职日期，非空</span></span><br><span class="line">  salary <span class="keyword">DOUBLE</span>(<span class="number">7</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> , <span class="comment">-- 工资，非空</span></span><br><span class="line">  bonus <span class="keyword">DOUBLE</span>(<span class="number">7</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> <span class="comment">-- 奖金，如果没有奖金默认为0</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>通过上面语句可以创建带有约束的 <code>emp</code> 表，约束能不能发挥作用呢。接下来我们一一进行验证，先添加一条没有问题的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(id,ename,joindate,salary,bonus) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;1999-11-11&#x27;</span>,<span class="number">8800</span>,<span class="number">5000</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>验证主键约束，非空且唯一</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(id,ename,joindate,salary,bonus) <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;1999-11-11&#x27;</span>,<span class="number">8800</span>,<span class="number">5000</span>);</span><br></pre></td></tr></table></figure>

<p>执行结果如下：</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221102130319470.png" alt="image-20221102130319470"></p>
<p>从上面的结果可以看到，字段 <code>id</code> 不能为null。那我们重新添加一条数据，如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(id,ename,joindate,salary,bonus) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;1999-11-11&#x27;</span>,<span class="number">8800</span>,<span class="number">5000</span>);</span><br></pre></td></tr></table></figure>

<p>执行结果如下：</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221102130406879.png" alt="image-20221102130406879"></p>
<p>从上面结果可以看到，1这个值重复了。所以主键约束是用来限制数据非空且唯一的。那我们再添加一条符合要求的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(id,ename,joindate,salary,bonus) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;1999-11-11&#x27;</span>,<span class="number">8800</span>,<span class="number">5000</span>);</span><br></pre></td></tr></table></figure>

<p>执行结果如下：</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221102130424017.png" alt="image-20221102130424017"></p>
<ul>
<li><strong>验证非空约束</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(id,ename,joindate,salary,bonus) <span class="keyword">values</span>(<span class="number">3</span>,<span class="keyword">null</span>,<span class="string">&#x27;1999-11-11&#x27;</span>,<span class="number">8800</span>,<span class="number">5000</span>);</span><br></pre></td></tr></table></figure>

<p>执行结果如下：</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221102130443800.png" alt="image-20221102130443800"></p>
<p>从上面结果可以看到，<code>ename</code> 字段的非空约束生效了。</p>
<ul>
<li><strong>验证唯一约束</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(id,ename,joindate,salary,bonus) <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;1999-11-11&#x27;</span>,<span class="number">8800</span>,<span class="number">5000</span>);</span><br></pre></td></tr></table></figure>

<p>执行结果如下：</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221102130510422.png" alt="image-20221102130510422"></p>
<p>从上面结果可以看到，<code>ename</code> 字段的唯一约束生效了。</p>
<ul>
<li><strong>验证默认约束</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(id,ename,joindate,salary) <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="string">&#x27;1999-11-11&#x27;</span>,<span class="number">8800</span>);</span><br></pre></td></tr></table></figure>

<p>执行完上面语句后查询表中数据，如下图可以看到王五这条数据的bonus列就有了默认值0。</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221102130522137.png" alt="image-20221102130522137"></p>
<p><strong>注意：默认约束只有在不给值时才会采用默认值。如果给了null，那值就是null值。</strong></p>
<p>如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(id,ename,joindate,salary,bonus) <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;赵六&#x27;</span>,<span class="string">&#x27;1999-11-11&#x27;</span>,<span class="number">8800</span>,<span class="keyword">null</span>);</span><br></pre></td></tr></table></figure>

<p>执行完上面语句后查询表中数据，如下图可以看到赵六这条数据的bonus列的值是null。</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20221102130550049.png" alt="image-20221102130550049"></p>
<ul>
<li><strong>验证自动增长： auto_increment  当列是数字类型 并且唯一约束</strong></li>
</ul>
<p>重新创建 <code>emp</code> 表，并给id列添加自动增长</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 员工表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp (</span><br><span class="line">  id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY auto_increment, <span class="comment">-- 员工id，主键且自增长</span></span><br><span class="line">  ename <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">UNIQUE</span>, <span class="comment">-- 员工姓名，非空并且唯一</span></span><br><span class="line">  joindate <span class="type">DATE</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> , <span class="comment">-- 入职日期，非空</span></span><br><span class="line">  salary <span class="keyword">DOUBLE</span>(<span class="number">7</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> , <span class="comment">-- 工资，非空</span></span><br><span class="line">  bonus <span class="keyword">DOUBLE</span>(<span class="number">7</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> <span class="comment">-- 奖金，如果没有奖金默认为0</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>接下来给emp添加数据，分别验证不给id列添加值以及给id列添加null值，id列的值会不会自动增长：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(ename,joindate,salary,bonus) <span class="keyword">values</span>(<span class="string">&#x27;赵六&#x27;</span>,<span class="string">&#x27;1999-11-11&#x27;</span>,<span class="number">8800</span>,<span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(id,ename,joindate,salary,bonus) <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;赵六2&#x27;</span>,<span class="string">&#x27;1999-11-11&#x27;</span>,<span class="number">8800</span>,<span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(id,ename,joindate,salary,bonus) <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;赵六3&#x27;</span>,<span class="string">&#x27;1999-11-11&#x27;</span>,<span class="number">8800</span>,<span class="keyword">null</span>);</span><br></pre></td></tr></table></figure>

<h3 id="1-8、外键约束"><a href="#1-8、外键约束" class="headerlink" title="1.8、外键约束"></a>1.8、外键约束</h3><h4 id="1-8-1、概述"><a href="#1-8-1、概述" class="headerlink" title="1.8.1、概述"></a>1.8.1、概述</h4><p>外键用来让两个表的数据之间建立链接，保证数据的一致性和完整性。</p>
<p>如何理解上面的概念呢？如下图有两张表，员工表和部门表：</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724120904180.png"></p>
<p>员工表中的dep_id字段是部门表的id字段关联，也就是说1号学生张三属于1号部门研发部的员工。现在我要删除1号部门，就会出现错误的数据（员工表中属于1号部门的数据）。而我们上面说的两张表的关系只是我们认为它们有关系，此时需要通过外键让这两张表产生数据库层面的关系，这样你要删除部门表中的1号部门的数据将无法删除。</p>
<h4 id="1-8-2、语法"><a href="#1-8-2、语法" class="headerlink" title="1.8.2、语法"></a>1.8.2、语法</h4><ul>
<li>添加外键约束</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表时添加外键约束</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名(</span><br><span class="line">   列名 数据类型,</span><br><span class="line">   …</span><br><span class="line">   [<span class="keyword">CONSTRAINT</span>] [外键名称] <span class="keyword">FOREIGN</span> KEY(外键列名) <span class="keyword">REFERENCES</span> 主表(主表列名) </span><br><span class="line">); </span><br><span class="line"><span class="comment">-- 建完表后添加外键约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> 外键名称 <span class="keyword">FOREIGN</span> KEY (外键字段名称) <span class="keyword">REFERENCES</span> 主表名称(主表列名称);</span><br></pre></td></tr></table></figure>

<ul>
<li>删除外键约束</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY 外键名称;</span><br></pre></td></tr></table></figure>

<h4 id="1-8-3、练习"><a href="#1-8-3、练习" class="headerlink" title="1.8.3、练习"></a>1.8.3、练习</h4><p>根据上述语法创建员工表和部门表，并添加上外键约束：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除表</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> emp;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> dept;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 部门表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    dep_name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    addr <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 员工表 </span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    age <span class="type">int</span>,</span><br><span class="line">    dep_id <span class="type">int</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 添加外键 dep_id,关联 dept 表的id主键</span></span><br><span class="line">    <span class="keyword">CONSTRAINT</span> fk_emp_dept <span class="keyword">FOREIGN</span> KEY(dep_id) <span class="keyword">REFERENCES</span> dept(id)  </span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>添加数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 添加 2 个部门</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept(dep_name,addr) <span class="keyword">values</span></span><br><span class="line">(<span class="string">&#x27;研发部&#x27;</span>,<span class="string">&#x27;广州&#x27;</span>),(<span class="string">&#x27;销售部&#x27;</span>, <span class="string">&#x27;深圳&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加员工,dep_id 表示员工所在的部门</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp (NAME, age, dep_id) <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="string">&#x27;张三&#x27;</span>, <span class="number">20</span>, <span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;李四&#x27;</span>, <span class="number">20</span>, <span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;王五&#x27;</span>, <span class="number">20</span>, <span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;赵六&#x27;</span>, <span class="number">20</span>, <span class="number">2</span>),</span><br><span class="line">(<span class="string">&#x27;孙七&#x27;</span>, <span class="number">22</span>, <span class="number">2</span>),</span><br><span class="line">(<span class="string">&#x27;周八&#x27;</span>, <span class="number">18</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p>此时删除 <code>研发部</code> 这条数据，会发现无法删除。</p>
<p>删除外键</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> emp <span class="keyword">drop</span> <span class="keyword">FOREIGN</span> key fk_emp_dept;</span><br></pre></td></tr></table></figure>

<p>重新添加外键</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> emp <span class="keyword">add</span> <span class="keyword">CONSTRAINT</span> fk_emp_dept <span class="keyword">FOREIGN</span> key(dep_id) <span class="keyword">REFERENCES</span> dept(id);</span><br></pre></td></tr></table></figure>

<h2 id="2、数据库设计"><a href="#2、数据库设计" class="headerlink" title="2、数据库设计"></a>2、数据库设计</h2><h3 id="2-1、数据库设计简介"><a href="#2-1、数据库设计简介" class="headerlink" title="2.1、数据库设计简介"></a>2.1、数据库设计简介</h3><ul>
<li>软件的研发步骤</li>
</ul>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724130925801.png"></p>
<ul>
<li><p>数据库设计概念</p>
<ul>
<li>数据库设计就是根据业务系统的具体需求，结合我们所选用的DBMS，为这个业务系统构造出最优的数据存储模型。</li>
<li>建立数据库中的<strong>表结构</strong>以及<strong>表与表之间的关联关系</strong>的过程。</li>
<li>有哪些表？表里有哪些字段？表和表之间有什么关系？</li>
</ul>
</li>
<li><p>数据库设计的步骤</p>
<ul>
<li><p>需求分析（数据是什么? 数据具有哪些属性? 数据与属性的特点是什么）</p>
</li>
<li><p>逻辑分析（通过ER图对数据库进行逻辑建模，不需要考虑我们所选用的数据库管理系统）</p>
<p>  如下图就是ER(Entity&#x2F;Relation)图：</p>
<p>  <img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724131210759.png"></p>
</li>
<li><p>物理设计（根据数据库自身的特点把逻辑设计转换为物理设计）</p>
</li>
<li><p>维护设计（1.对新的需求进行建表；2.表优化）</p>
</li>
</ul>
</li>
<li><p>表关系</p>
<ul>
<li><p>一对一</p>
<ul>
<li>如：用户 和 用户详情</li>
<li>一对一关系多用于表拆分，将一个实体中经常使用的字段放一张表，不经常使用的字段放另一张表，用于提升查询性能</li>
</ul>
</li>
<li><p>一对多</p>
<ul>
<li><p>如：部门 和 员工</p>
</li>
<li><p>一个部门对应多个员工，一个员工对应一个部门。</p>
</li>
</ul>
</li>
<li><p>多对多</p>
<ul>
<li><p>如：商品 和 订单</p>
</li>
<li><p>一个商品对应多个订单，一个订单包含多个商品。</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-2、表关系-一对多"><a href="#2-2、表关系-一对多" class="headerlink" title="2.2、表关系(一对多)"></a>2.2、表关系(一对多)</h3><ul>
<li><p>一对多</p>
<ul>
<li>如：部门 和 员工</li>
<li>一个部门对应多个员工，一个员工对应一个部门。</li>
</ul>
</li>
<li><p>实现方式</p>
<p>  <strong>在多的一方建立外键，指向一的一方的主键</strong></p>
</li>
<li><p>案例</p>
<p>  我们还是以 <code>员工表</code> 和 <code>部门表</code> 举例:</p>
<p>  <img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724134145803.png"></p>
<p>  经过分析发现，员工表属于多的一方，而部门表属于一的一方，此时我们会在员工表中添加一列（dep_id），指向于部门表的主键（id)：</p>
</li>
</ul>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724134318685.png"></p>
<p>建表语句如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除表</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> tb_emp;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> tb_dept;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 部门表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_dept(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    dep_name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    addr <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 员工表 </span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_emp(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    age <span class="type">int</span>,</span><br><span class="line">    dep_id <span class="type">int</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 添加外键 dep_id,关联 dept 表的id主键</span></span><br><span class="line">    <span class="keyword">CONSTRAINT</span> fk_emp_dept <span class="keyword">FOREIGN</span> KEY(dep_id) <span class="keyword">REFERENCES</span> tb_dept(id)   </span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>查看表结构模型图：</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724140456921.png"></p>
<h3 id="2-3、表关系-多对多"><a href="#2-3、表关系-多对多" class="headerlink" title="2.3、表关系(多对多)"></a>2.3、表关系(多对多)</h3><ul>
<li><p>多对多</p>
<ul>
<li>如：商品 和 订单</li>
<li>一个商品对应多个订单，一个订单包含多个商品</li>
</ul>
</li>
<li><p>实现方式</p>
<p>  <strong>建立第三张中间表，中间表至少包含两个外键，分别关联两方主键</strong></p>
</li>
<li><p>案例</p>
<p>  我们以 <code>订单表</code> 和 <code>商品表</code> 举例：</p>
<p>  <img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724134735939.png"></p>
<p>  经过分析发现，订单表和商品表都属于多的一方，此时需要创建一个中间表，在中间表中添加订单表的外键和商品表的外键指向两张表的主键：</p>
</li>
</ul>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724135054834.png"></p>
<p>建表语句如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除表</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> tb_order_goods;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> tb_order;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> tb_goods;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 订单表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_order(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    payment <span class="keyword">double</span>(<span class="number">10</span>,<span class="number">2</span>),</span><br><span class="line">    payment_type TINYINT,</span><br><span class="line">    status TINYINT</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 商品表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_goods(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    title <span class="type">varchar</span>(<span class="number">100</span>),</span><br><span class="line">    price <span class="keyword">double</span>(<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 订单商品中间表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_order_goods(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    order_id <span class="type">int</span>,</span><br><span class="line">    goods_id <span class="type">int</span>,</span><br><span class="line">    count <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 建完表后，添加外键</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tb_order_goods <span class="keyword">add</span> <span class="keyword">CONSTRAINT</span> fk_order_id <span class="keyword">FOREIGN</span> key(order_id) <span class="keyword">REFERENCES</span> tb_order(id);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tb_order_goods <span class="keyword">add</span> <span class="keyword">CONSTRAINT</span> fk_goods_id <span class="keyword">FOREIGN</span> key(goods_id) <span class="keyword">REFERENCES</span> tb_goods(id);</span><br></pre></td></tr></table></figure>

<p>查看表结构模型图：</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724140307910.png"></p>
<h3 id="2-4、表关系-一对一"><a href="#2-4、表关系-一对一" class="headerlink" title="2.4、表关系(一对一)"></a>2.4、表关系(一对一)</h3><ul>
<li><p>一对一</p>
<ul>
<li>如：用户 和 用户详情</li>
<li>一对一关系多用于表拆分，将一个实体中经常使用的字段放一张表，不经常使用的字段放另一张表，用于提升查询性能</li>
</ul>
</li>
<li><p>实现方式</p>
<p>  <strong>在任意一方加入外键，关联另一方主键，并且设置外键为唯一(UNIQUE)</strong></p>
</li>
<li><p>案例</p>
<p>  我们以 <code>用户表</code> 举例：</p>
<p>  <img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724135346913.png"></p>
<p>  而在真正使用过程中发现 id、photo、nickname、age、gender 字段比较常用，此时就可以将这张表查分成两张表。</p>
<p>  <img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724135649341.png"></p>
</li>
</ul>
<p>建表语句如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_user_desc (</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    city <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    edu <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">    income <span class="type">int</span>,</span><br><span class="line">    status <span class="type">char</span>(<span class="number">2</span>),</span><br><span class="line">    des <span class="type">varchar</span>(<span class="number">100</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_user (</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    photo <span class="type">varchar</span>(<span class="number">100</span>),</span><br><span class="line">    nickname <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">    age <span class="type">int</span>,</span><br><span class="line">    gender <span class="type">char</span>(<span class="number">1</span>),</span><br><span class="line">    desc_id <span class="type">int</span> <span class="keyword">unique</span>,</span><br><span class="line">    <span class="comment">-- 添加外键</span></span><br><span class="line">    <span class="keyword">CONSTRAINT</span> fk_user_desc <span class="keyword">FOREIGN</span> KEY(desc_id) <span class="keyword">REFERENCES</span> tb_user_desc(id)    </span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>查看表结构模型图：</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724141445785.png"></p>
<h2 id="3、多表查询"><a href="#3、多表查询" class="headerlink" title="3、多表查询"></a>3、多表查询</h2><p>多表查询顾名思义就是从多张表中一次性的查询出我们想要的数据。我们通过具体的sql给他们演示，先准备环境</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> emp;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> dept;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 创建部门表</span><br><span class="line">    <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept(</span><br><span class="line">        did <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">        dname <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    # 创建员工表</span><br><span class="line">    <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp (</span><br><span class="line">        id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">        NAME <span class="type">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">        gender <span class="type">CHAR</span>(<span class="number">1</span>), <span class="comment">-- 性别</span></span><br><span class="line">        salary <span class="keyword">DOUBLE</span>, <span class="comment">-- 工资</span></span><br><span class="line">        join_date <span class="type">DATE</span>, <span class="comment">-- 入职日期</span></span><br><span class="line">        dep_id <span class="type">INT</span>,</span><br><span class="line">        <span class="keyword">FOREIGN</span> KEY (dep_id) <span class="keyword">REFERENCES</span> dept(did) <span class="comment">-- 外键，关联部门表(部门表的主键)</span></span><br><span class="line">    );</span><br><span class="line">    <span class="comment">-- 添加部门数据</span></span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept (dNAME) <span class="keyword">VALUES</span> (<span class="string">&#x27;研发部&#x27;</span>),(<span class="string">&#x27;市场部&#x27;</span>),(<span class="string">&#x27;财务部&#x27;</span>),(<span class="string">&#x27;销售部&#x27;</span>);</span><br><span class="line">    <span class="comment">-- 添加员工数据</span></span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(NAME,gender,salary,join_date,dep_id) <span class="keyword">VALUES</span></span><br><span class="line">    (<span class="string">&#x27;孙悟空&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">7200</span>,<span class="string">&#x27;2013-02-24&#x27;</span>,<span class="number">1</span>),</span><br><span class="line">    (<span class="string">&#x27;猪八戒&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">3600</span>,<span class="string">&#x27;2010-12-02&#x27;</span>,<span class="number">2</span>),</span><br><span class="line">    (<span class="string">&#x27;唐僧&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">9000</span>,<span class="string">&#x27;2008-08-08&#x27;</span>,<span class="number">2</span>),</span><br><span class="line">    (<span class="string">&#x27;白骨精&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">5000</span>,<span class="string">&#x27;2015-10-07&#x27;</span>,<span class="number">3</span>),</span><br><span class="line">    (<span class="string">&#x27;蜘蛛精&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">4500</span>,<span class="string">&#x27;2011-03-14&#x27;</span>,<span class="number">1</span>),</span><br><span class="line">    (<span class="string">&#x27;小白龙&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">2500</span>,<span class="string">&#x27;2011-02-14&#x27;</span>,<span class="keyword">null</span>); </span><br></pre></td></tr></table></figure>

<p>执行下面的多表查询语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp , dept;  <span class="comment">-- 从emp和dept表中查询所有的字段数据</span></span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724173630506.png"></p>
<p>从上面的结果我们看到有一些无效的数据，如 <code>孙悟空</code> 这个员工属于1号部门，但也同时关联的2、3、4号部门。所以我们要通过限制员工表中的 <code>dep_id</code> 字段的值和部门表 <code>did</code> 字段的值相等来消除这些无效的数据，</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp , dept <span class="keyword">where</span> emp.dep_id <span class="operator">=</span> dept.did;</span><br></pre></td></tr></table></figure>

<p>执行后结果如下：</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724174212443.png"></p>
<p>上面语句就是连接查询，那么多表查询都有哪些呢？</p>
<ul>
<li><p>连接查询</p>
<p>  <img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724174717647.png"></p>
<ul>
<li>内连接查询 ：相当于查询AB交集数据</li>
<li>外连接查询<ul>
<li>左外连接查询 ：相当于查询A表所有数据和交集部门数据</li>
<li>右外连接查询 ： 相当于查询B表所有数据和交集部分数据</li>
</ul>
</li>
</ul>
</li>
<li><p>子查询</p>
</li>
</ul>
<h3 id="3-1、内连接查询"><a href="#3-1、内连接查询" class="headerlink" title="3.1、内连接查询"></a>3.1、内连接查询</h3><ul>
<li>语法</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 隐式内连接</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span>,表<span class="number">2</span>… <span class="keyword">WHERE</span> 条件;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 显示内连接</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span> [<span class="keyword">INNER</span>] <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 条件;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>内连接相当于查询 A B 交集数据</p>
</blockquote>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724174717647.png"></p>
<ul>
<li><p>案例</p>
<ul>
<li><p>隐式内连接</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    emp,</span><br><span class="line">    dept</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    emp.dep_id <span class="operator">=</span> dept.did;</span><br></pre></td></tr></table></figure>

<p>  执行上述语句结果如下：</p>
<p>  <img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724175344508.png"></p>
</li>
<li><p>查询 emp的 name， gender，dept表的dname</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    emp. NAME,</span><br><span class="line">    emp.gender,</span><br><span class="line">    dept.dname</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    emp,</span><br><span class="line">    dept</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    emp.dep_id <span class="operator">=</span> dept.did;</span><br></pre></td></tr></table></figure>

<p>  执行语句结果如下：</p>
<p>  <img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724175518159.png"></p>
<p>  上面语句中使用表名指定字段所属有点麻烦，sql也支持给表指别名，上述语句可以改进为</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    t1. NAME,</span><br><span class="line">    t1.gender,</span><br><span class="line">    t2.dname</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    emp t1,</span><br><span class="line">    dept t2</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    t1.dep_id <span class="operator">=</span> t2.did;</span><br></pre></td></tr></table></figure>
</li>
<li><p>显式内连接</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">inner</span> <span class="keyword">join</span> dept <span class="keyword">on</span> emp.dep_id <span class="operator">=</span> dept.did;</span><br><span class="line"><span class="comment">-- 上面语句中的inner可以省略，可以书写为如下语句</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp  <span class="keyword">join</span> dept <span class="keyword">on</span> emp.dep_id <span class="operator">=</span> dept.did;</span><br></pre></td></tr></table></figure>

<p>  执行结果如下：</p>
<p>  <img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724180103531.png"></p>
</li>
</ul>
</li>
</ul>
<h3 id="3-2、外连接查询"><a href="#3-2、外连接查询" class="headerlink" title="3.2、外连接查询"></a>3.2、外连接查询</h3><ul>
<li><p>语法</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 左外连接</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span> <span class="keyword">LEFT</span> [<span class="keyword">OUTER</span>] <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 条件;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 右外连接</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span> <span class="keyword">RIGHT</span> [<span class="keyword">OUTER</span>] <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 条件;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>左外连接：相当于查询A表所有数据和交集部分数据</p>
<p>右外连接：相当于查询B表所有数据和交集部分数据</p>
</blockquote>
<p>  <img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724174717647.png"></p>
</li>
<li><p>案例</p>
<ul>
<li><p>查询emp表所有数据和对应的部门信息（左外连接）</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">left</span> <span class="keyword">join</span> dept <span class="keyword">on</span> emp.dep_id <span class="operator">=</span> dept.did;</span><br></pre></td></tr></table></figure>

<p>  执行语句结果如下：</p>
<p>  <img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724180542757.png"></p>
<p>  结果显示查询到了左表（emp）中所有的数据及两张表能关联的数据。</p>
</li>
<li><p>查询dept表所有数据和对应的员工信息（右外连接）</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">right</span> <span class="keyword">join</span> dept <span class="keyword">on</span> emp.dep_id <span class="operator">=</span> dept.did;</span><br></pre></td></tr></table></figure>

<p>  执行语句结果如下：</p>
<p>  <img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724180613494.png"></p>
<p>  结果显示查询到了右表（dept）中所有的数据及两张表能关联的数据。</p>
<p>  要查询出部门表中所有的数据，也可以通过左外连接实现，只需要将两个表的位置进行互换：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept <span class="keyword">left</span> <span class="keyword">join</span> emp <span class="keyword">on</span> emp.dep_id <span class="operator">=</span> dept.did;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="3-3、子查询"><a href="#3-3、子查询" class="headerlink" title="3.3、子查询"></a>3.3、子查询</h3><ul>
<li><p>概念</p>
<p>  <strong>查询中嵌套查询，称嵌套查询为子查询。</strong></p>
<p>  什么是查询中嵌套查询呢？我们通过一个例子来看：</p>
<p>  <strong>需求：查询工资高于猪八戒的员工信息。</strong></p>
<p>  来实现这个需求，我们就可以通过二步实现，第一步：先查询出来 猪八戒的工资</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> salary <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;猪八戒&#x27;</span></span><br></pre></td></tr></table></figure>

<p>   第二步：查询工资高于猪八戒的员工信息</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> salary <span class="operator">&gt;</span> <span class="number">3600</span>;</span><br></pre></td></tr></table></figure>

<p>  第二步中的3600可以通过第一步的sql查询出来，所以将3600用第一步的sql语句进行替换</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> salary <span class="operator">&gt;</span> (<span class="keyword">select</span> salary <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;猪八戒&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>  这就是查询语句中嵌套查询语句。</p>
</li>
<li><p>子查询根据查询结果不同，作用不同</p>
<ul>
<li>子查询语句结果是单行单列，子查询语句作为条件值，使用 &#x3D;  !&#x3D;  &gt;  &lt;  等进行条件判断</li>
<li>子查询语句结果是多行单列，子查询语句作为条件值，使用 in 等关键字进行条件判断</li>
<li>子查询语句结果是多行多列，子查询语句作为虚拟表</li>
</ul>
</li>
<li><p>案例</p>
<ul>
<li><p>查询 ‘财务部’ 和 ‘市场部’ 所有的员工信息</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询 &#x27;财务部&#x27; 或者 &#x27;市场部&#x27; 所有的员工的部门did</span></span><br><span class="line"><span class="keyword">select</span> did <span class="keyword">from</span> dept <span class="keyword">where</span> dname <span class="operator">=</span> <span class="string">&#x27;财务部&#x27;</span> <span class="keyword">or</span> dname <span class="operator">=</span> <span class="string">&#x27;市场部&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> dep_id <span class="keyword">in</span> (<span class="keyword">select</span> did <span class="keyword">from</span> dept <span class="keyword">where</span> dname <span class="operator">=</span> <span class="string">&#x27;财务部&#x27;</span> <span class="keyword">or</span> dname <span class="operator">=</span> <span class="string">&#x27;市场部&#x27;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询入职日期是 ‘2011-11-11’ 之后的员工信息和部门信息</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询入职日期是 &#x27;2011-11-11&#x27; 之后的员工信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> join_date <span class="operator">&gt;</span> <span class="string">&#x27;2011-11-11&#x27;</span> ;</span><br><span class="line"><span class="comment">-- 将上面语句的结果作为虚拟表和dept表进行内连接查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> join_date <span class="operator">&gt;</span> <span class="string">&#x27;2011-11-11&#x27;</span> ) t1, dept <span class="keyword">where</span> t1.dep_id <span class="operator">=</span> dept.did;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="3-4、案例"><a href="#3-4、案例" class="headerlink" title="3.4、案例"></a>3.4、案例</h3><ul>
<li>环境准备：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> emp;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> dept;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> job;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> salarygrade;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 部门表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept (</span><br><span class="line">  did <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY <span class="keyword">PRIMARY</span> KEY, <span class="comment">-- 部门id</span></span><br><span class="line">  dname <span class="type">VARCHAR</span>(<span class="number">50</span>), <span class="comment">-- 部门名称</span></span><br><span class="line">  loc <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="comment">-- 部门所在地</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 职务表，职务名称，职务描述</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> job (</span><br><span class="line">  id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  jname <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">  description <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 员工表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp (</span><br><span class="line">  id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY, <span class="comment">-- 员工id</span></span><br><span class="line">  ename <span class="type">VARCHAR</span>(<span class="number">50</span>), <span class="comment">-- 员工姓名</span></span><br><span class="line">  job_id <span class="type">INT</span>, <span class="comment">-- 职务id</span></span><br><span class="line">  mgr <span class="type">INT</span> , <span class="comment">-- 上级领导</span></span><br><span class="line">  joindate <span class="type">DATE</span>, <span class="comment">-- 入职日期</span></span><br><span class="line">  salary <span class="type">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>), <span class="comment">-- 工资</span></span><br><span class="line">  bonus <span class="type">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>), <span class="comment">-- 奖金</span></span><br><span class="line">  dept_id <span class="type">INT</span>, <span class="comment">-- 所在部门编号</span></span><br><span class="line">  <span class="keyword">CONSTRAINT</span> emp_jobid_ref_job_id_fk <span class="keyword">FOREIGN</span> KEY (job_id) <span class="keyword">REFERENCES</span> job (id),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> emp_deptid_ref_dept_id_fk <span class="keyword">FOREIGN</span> KEY (dept_id) <span class="keyword">REFERENCES</span> dept (id)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 工资等级表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> salarygrade (</span><br><span class="line">  grade <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,   <span class="comment">-- 级别</span></span><br><span class="line">  losalary <span class="type">INT</span>,  <span class="comment">-- 最低工资</span></span><br><span class="line">  hisalary <span class="type">INT</span> <span class="comment">-- 最高工资</span></span><br><span class="line">);</span><br><span class="line">                </span><br><span class="line"><span class="comment">-- 添加4个部门</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept(did,dname,loc) <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="number">10</span>,<span class="string">&#x27;教研部&#x27;</span>,<span class="string">&#x27;北京&#x27;</span>),</span><br><span class="line">(<span class="number">20</span>,<span class="string">&#x27;学工部&#x27;</span>,<span class="string">&#x27;上海&#x27;</span>),</span><br><span class="line">(<span class="number">30</span>,<span class="string">&#x27;销售部&#x27;</span>,<span class="string">&#x27;广州&#x27;</span>),</span><br><span class="line">(<span class="number">40</span>,<span class="string">&#x27;财务部&#x27;</span>,<span class="string">&#x27;深圳&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加4个职务</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> job (id, jname, description) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;董事长&#x27;</span>, <span class="string">&#x27;管理整个公司，接单&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;经理&#x27;</span>, <span class="string">&#x27;管理部门员工&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="string">&#x27;销售员&#x27;</span>, <span class="string">&#x27;向客人推销产品&#x27;</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="string">&#x27;文员&#x27;</span>, <span class="string">&#x27;使用办公软件&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加员工</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(id,ename,job_id,mgr,joindate,salary,bonus,dept_id) <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="number">1001</span>,<span class="string">&#x27;孙悟空&#x27;</span>,<span class="number">4</span>,<span class="number">1004</span>,<span class="string">&#x27;2000-12-17&#x27;</span>,<span class="string">&#x27;8000.00&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">20</span>),</span><br><span class="line">(<span class="number">1002</span>,<span class="string">&#x27;卢俊义&#x27;</span>,<span class="number">3</span>,<span class="number">1006</span>,<span class="string">&#x27;2001-02-20&#x27;</span>,<span class="string">&#x27;16000.00&#x27;</span>,<span class="string">&#x27;3000.00&#x27;</span>,<span class="number">30</span>),</span><br><span class="line">(<span class="number">1003</span>,<span class="string">&#x27;林冲&#x27;</span>,<span class="number">3</span>,<span class="number">1006</span>,<span class="string">&#x27;2001-02-22&#x27;</span>,<span class="string">&#x27;12500.00&#x27;</span>,<span class="string">&#x27;5000.00&#x27;</span>,<span class="number">30</span>),</span><br><span class="line">(<span class="number">1004</span>,<span class="string">&#x27;唐僧&#x27;</span>,<span class="number">2</span>,<span class="number">1009</span>,<span class="string">&#x27;2001-04-02&#x27;</span>,<span class="string">&#x27;29750.00&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">20</span>),</span><br><span class="line">(<span class="number">1005</span>,<span class="string">&#x27;李逵&#x27;</span>,<span class="number">4</span>,<span class="number">1006</span>,<span class="string">&#x27;2001-09-28&#x27;</span>,<span class="string">&#x27;12500.00&#x27;</span>,<span class="string">&#x27;14000.00&#x27;</span>,<span class="number">30</span>),</span><br><span class="line">(<span class="number">1006</span>,<span class="string">&#x27;宋江&#x27;</span>,<span class="number">2</span>,<span class="number">1009</span>,<span class="string">&#x27;2001-05-01&#x27;</span>,<span class="string">&#x27;28500.00&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">30</span>),</span><br><span class="line">(<span class="number">1007</span>,<span class="string">&#x27;刘备&#x27;</span>,<span class="number">2</span>,<span class="number">1009</span>,<span class="string">&#x27;2001-09-01&#x27;</span>,<span class="string">&#x27;24500.00&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">10</span>),</span><br><span class="line">(<span class="number">1008</span>,<span class="string">&#x27;猪八戒&#x27;</span>,<span class="number">4</span>,<span class="number">1004</span>,<span class="string">&#x27;2007-04-19&#x27;</span>,<span class="string">&#x27;30000.00&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">20</span>),</span><br><span class="line">(<span class="number">1009</span>,<span class="string">&#x27;罗贯中&#x27;</span>,<span class="number">1</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;2001-11-17&#x27;</span>,<span class="string">&#x27;50000.00&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">10</span>),</span><br><span class="line">(<span class="number">1010</span>,<span class="string">&#x27;吴用&#x27;</span>,<span class="number">3</span>,<span class="number">1006</span>,<span class="string">&#x27;2001-09-08&#x27;</span>,<span class="string">&#x27;15000.00&#x27;</span>,<span class="string">&#x27;0.00&#x27;</span>,<span class="number">30</span>),</span><br><span class="line">(<span class="number">1011</span>,<span class="string">&#x27;沙僧&#x27;</span>,<span class="number">4</span>,<span class="number">1004</span>,<span class="string">&#x27;2007-05-23&#x27;</span>,<span class="string">&#x27;11000.00&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">20</span>),</span><br><span class="line">(<span class="number">1012</span>,<span class="string">&#x27;李逵&#x27;</span>,<span class="number">4</span>,<span class="number">1006</span>,<span class="string">&#x27;2001-12-03&#x27;</span>,<span class="string">&#x27;9500.00&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">30</span>),</span><br><span class="line">(<span class="number">1013</span>,<span class="string">&#x27;小白龙&#x27;</span>,<span class="number">4</span>,<span class="number">1004</span>,<span class="string">&#x27;2001-12-03&#x27;</span>,<span class="string">&#x27;30000.00&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">20</span>),</span><br><span class="line">(<span class="number">1014</span>,<span class="string">&#x27;关羽&#x27;</span>,<span class="number">4</span>,<span class="number">1007</span>,<span class="string">&#x27;2002-01-23&#x27;</span>,<span class="string">&#x27;13000.00&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加5个工资等级</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salarygrade(grade,losalary,hisalary) <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="number">1</span>,<span class="number">7000</span>,<span class="number">12000</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="number">12010</span>,<span class="number">14000</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="number">14010</span>,<span class="number">20000</span>),</span><br><span class="line">(<span class="number">4</span>,<span class="number">20010</span>,<span class="number">30000</span>),</span><br><span class="line">(<span class="number">5</span>,<span class="number">30010</span>,<span class="number">99990</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>需求</p>
<ol>
<li><p>查询所有员工信息。查询员工编号，员工姓名，工资，职务名称，职务描述</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    分析：</span></span><br><span class="line"><span class="comment">        1. 员工编号，员工姓名，工资 信息在emp 员工表中</span></span><br><span class="line"><span class="comment">        2. 职务名称，职务描述 信息在 job 职务表中</span></span><br><span class="line"><span class="comment">        3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- 方式一 ：隐式内连接</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    emp.id,</span><br><span class="line">    emp.ename,</span><br><span class="line">    emp.salary,</span><br><span class="line">    job.jname,</span><br><span class="line">    job.description</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    emp,</span><br><span class="line">    job</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    emp.job_id <span class="operator">=</span> job.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二 ：显式内连接</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    emp.id,</span><br><span class="line">    emp.ename,</span><br><span class="line">    emp.salary,</span><br><span class="line">    job.jname,</span><br><span class="line">    job.description</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    emp</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> job <span class="keyword">ON</span> emp.job_id <span class="operator">=</span> job.id;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询员工编号，员工姓名，工资，职务名称，职务描述，部门名称，部门位置</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    分析：</span></span><br><span class="line"><span class="comment">        1. 员工编号，员工姓名，工资 信息在emp 员工表中</span></span><br><span class="line"><span class="comment">        2. 职务名称，职务描述 信息在 job 职务表中</span></span><br><span class="line"><span class="comment">        3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        4. 部门名称，部门位置 来自于 部门表 dept</span></span><br><span class="line"><span class="comment">        5. dept 和 emp 一对多关系 dept.id = emp.dept_id</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式一 ：隐式内连接</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    emp.id,</span><br><span class="line">    emp.ename,</span><br><span class="line">    emp.salary,</span><br><span class="line">    job.jname,</span><br><span class="line">    job.description,</span><br><span class="line">    dept.dname,</span><br><span class="line">    dept.loc</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    emp,</span><br><span class="line">    job,</span><br><span class="line">    dept</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    emp.job_id <span class="operator">=</span> job.id</span><br><span class="line">    <span class="keyword">and</span> dept.id <span class="operator">=</span> emp.dept_id</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二 ：显式内连接</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    emp.id,</span><br><span class="line">    emp.ename,</span><br><span class="line">    emp.salary,</span><br><span class="line">    job.jname,</span><br><span class="line">    job.description,</span><br><span class="line">    dept.dname,</span><br><span class="line">    dept.loc</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    emp</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> job <span class="keyword">ON</span> emp.job_id <span class="operator">=</span> job.id</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> dept.id <span class="operator">=</span> emp.dept_id</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询员工姓名，工资，工资等级</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    分析：</span></span><br><span class="line"><span class="comment">        1. 员工姓名，工资 信息在emp 员工表中</span></span><br><span class="line"><span class="comment">        2. 工资等级 信息在 salarygrade 工资等级表中</span></span><br><span class="line"><span class="comment">        3. emp.salary &gt;= salarygrade.losalary  and emp.salary &lt;= salarygrade.hisalary</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    emp.ename,</span><br><span class="line">    emp.salary,</span><br><span class="line">    t2.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    emp,</span><br><span class="line">    salarygrade t2</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    emp.salary <span class="operator">&gt;=</span> t2.losalary</span><br><span class="line"><span class="keyword">AND</span> emp.salary <span class="operator">&lt;=</span> t2.hisalary</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询员工姓名，工资，职务名称，职务描述，部门名称，部门位置，工资等级</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    分析：</span></span><br><span class="line"><span class="comment">        1. 员工编号，员工姓名，工资 信息在emp 员工表中</span></span><br><span class="line"><span class="comment">        2. 职务名称，职务描述 信息在 job 职务表中</span></span><br><span class="line"><span class="comment">        3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        4. 部门名称，部门位置 来自于 部门表 dept</span></span><br><span class="line"><span class="comment">        5. dept 和 emp 一对多关系 dept.id = emp.dept_id</span></span><br><span class="line"><span class="comment">        6. 工资等级 信息在 salarygrade 工资等级表中</span></span><br><span class="line"><span class="comment">        7. emp.salary &gt;= salarygrade.losalary  and emp.salary &lt;= salarygrade.hisalary</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    emp.id,</span><br><span class="line">    emp.ename,</span><br><span class="line">    emp.salary,</span><br><span class="line">    job.jname,</span><br><span class="line">    job.description,</span><br><span class="line">    dept.dname,</span><br><span class="line">    dept.loc,</span><br><span class="line">    t2.grade</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    emp</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> job <span class="keyword">ON</span> emp.job_id <span class="operator">=</span> job.id</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> dept.id <span class="operator">=</span> emp.dept_id</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> salarygrade t2 <span class="keyword">ON</span> emp.salary <span class="keyword">BETWEEN</span> t2.losalary <span class="keyword">and</span> t2.hisalary;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询出部门编号、部门名称、部门位置、部门人数</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    分析：</span></span><br><span class="line"><span class="comment">        1. 部门编号、部门名称、部门位置 来自于部门 dept 表</span></span><br><span class="line"><span class="comment">        2. 部门人数: 在emp表中 按照dept_id 进行分组，然后count(*)统计数量</span></span><br><span class="line"><span class="comment">        3. 使用子查询，让部门表和分组后的表进行内连接</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- 根据部门id分组查询每一个部门id和员工数</span></span><br><span class="line"><span class="keyword">select</span> dept_id, <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> dept_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    dept.id,</span><br><span class="line">    dept.dname,</span><br><span class="line">    dept.loc,</span><br><span class="line">    t1.count</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    dept,</span><br><span class="line">    (</span><br><span class="line">        <span class="keyword">SELECT</span></span><br><span class="line">            dept_id,</span><br><span class="line">            <span class="built_in">count</span>(<span class="operator">*</span>) count</span><br><span class="line">        <span class="keyword">FROM</span></span><br><span class="line">            emp</span><br><span class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">            dept_id</span><br><span class="line">    ) t1</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    dept.id <span class="operator">=</span> t1.dept_id</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h2 id="4、事务"><a href="#4、事务" class="headerlink" title="4、事务"></a>4、事务</h2><h3 id="4-1、概述"><a href="#4-1、概述" class="headerlink" title="4.1、概述"></a>4.1、概述</h3><blockquote>
<p>数据库的事务（Transaction）是一种机制、一个操作序列，包含了<strong>一组数据库操作命令</strong>。</p>
<p>事务把所有的命令作为一个整体一起向系统提交或撤销操作请求，即这一组数据库命令<strong>要么同时成功，要么同时失败</strong>。</p>
<p>事务是一个不可分割的工作逻辑单元。</p>
</blockquote>
<p>这些概念不好理解，接下来举例说明，如下图有一张表</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724224955876.png"></p>
<p>张三和李四账户中各有100块钱，现李四需要转换500块钱给张三，具体的转账操作为</p>
<ul>
<li>第一步：查询李四账户余额</li>
<li>第二步：从李四账户金额 -500</li>
<li>第三步：给张三账户金额 +500</li>
</ul>
<p>现在假设在转账过程中第二步完成后出现了异常第三步没有执行，就会造成李四账户金额少了500，而张三金额并没有多500；这样的系统是有问题的。如果解决呢？使用事务可以解决上述问题</p>
<p><img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724225537533.png"></p>
<p>从上图可以看到在转账前开启事务，如果出现了异常回滚事务，三步正常执行就提交事务，这样就可以完美解决问题。</p>
<h3 id="4-2、语法"><a href="#4-2、语法" class="headerlink" title="4.2、语法"></a>4.2、语法</h3><ul>
<li><p>开启事务</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line">或者  </span><br><span class="line"><span class="keyword">BEGIN</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>提交事务</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>回滚事务</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">rollback</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="4-3、代码验证"><a href="#4-3、代码验证" class="headerlink" title="4.3、代码验证"></a>4.3、代码验证</h3><ul>
<li><p>环境准备</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> account;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建账户表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> account(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">PRIMARY</span> KEY auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">    money <span class="keyword">double</span>(<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> account(name,money) <span class="keyword">values</span>(<span class="string">&#x27;张三&#x27;</span>,<span class="number">1000</span>),(<span class="string">&#x27;李四&#x27;</span>,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>不加事务演示问题</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 转账操作</span></span><br><span class="line"><span class="comment">-- 1. 查询李四账户金额是否大于500</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 李四账户 -500</span></span><br><span class="line"><span class="keyword">UPDATE</span> account <span class="keyword">set</span> money <span class="operator">=</span> money <span class="operator">-</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;李四&#x27;</span>;</span><br><span class="line"></span><br><span class="line">出现异常了...  <span class="comment">-- 此处不是注释，在整体执行时会出问题，后面的sql则不执行</span></span><br><span class="line"><span class="comment">-- 3. 张三账户 +500</span></span><br><span class="line"><span class="keyword">UPDATE</span> account <span class="keyword">set</span> money <span class="operator">=</span> money <span class="operator">+</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>  整体执行结果肯定会出问题，我们查询账户表中数据，发现李四账户少了500。</p>
<p>  <img src="/2022/11/01/%E9%BB%91%E9%A9%AC-JavaWeb%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%E7%89%88/image-20210724230250263.png"></p>
</li>
<li><p>添加事务sql如下：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 开启事务</span></span><br><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="comment">-- 转账操作</span></span><br><span class="line"><span class="comment">-- 1. 查询李四账户金额是否大于500</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 李四账户 -500</span></span><br><span class="line"><span class="keyword">UPDATE</span> account <span class="keyword">set</span> money <span class="operator">=</span> money <span class="operator">-</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;李四&#x27;</span>;</span><br><span class="line"></span><br><span class="line">出现异常了...  <span class="comment">-- 此处不是注释，在整体执行时会出问题，后面的sql则不执行</span></span><br><span class="line"><span class="comment">-- 3. 张三账户 +500</span></span><br><span class="line"><span class="keyword">UPDATE</span> account <span class="keyword">set</span> money <span class="operator">=</span> money <span class="operator">+</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 提交事务</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 回滚事务</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure>

<p>  上面sql中的执行成功进选择执行提交事务，而出现问题则执行回滚事务的语句。以后我们肯定不可能这样操作，而是在java中进行操作，在java中可以抓取异常，没出现异常提交事务，出现异常回滚事务。</p>
</li>
</ul>
<h3 id="4-4、事务的四大特征"><a href="#4-4、事务的四大特征" class="headerlink" title="4.4、事务的四大特征"></a>4.4、事务的四大特征</h3><ul>
<li>原子性（Atomicity）: 事务是不可分割的最小操作单位，要么同时成功，要么同时失败</li>
<li>一致性（Consistency） :事务完成时，必须使所有的数据都保持一致状态</li>
<li>隔离性（Isolation） :多个事务之间，操作的可见性</li>
<li>持久性（Durability） :事务一旦提交或回滚，它对数据库中的数据的改变就是永久的</li>
</ul>
<blockquote>
<p><strong>说明：</strong></p>
<p>mysql中事务是自动提交的。</p>
<p>也就是说我们不添加事务执行sql语句，语句执行完毕会自动的提交事务。</p>
<p>可以通过下面语句查询默认提交方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT @@autocommit;</span><br></pre></td></tr></table></figure>

<p>查询到的结果是1 则表示自动提交，结果是0表示手动提交。当然也可以通过下面语句修改提交方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set @@autocommit = 0;</span><br></pre></td></tr></table></figure>
</blockquote>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/10/29/JDBC/" rel="prev" title="JDBC">
                  <i class="fa fa-chevron-left"></i> JDBC
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">5OP</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
